encoding=UTF-8

; this should stop TS from looking for the CAN ID in the 2nd byte location and allow the page reads to work correctly.
enable2ndByteCanID = false

[SettingGroups]
   	; the referenceName will over-ride previous, so if you are creating a 
   	; settingGroup with a reference name of lambdaSensor, it will replace the 
   	; setting group defined in the settingGroups.xml of the TunerStudio config
   	; folder. If is is an undefined referenceName, it will be added.
   	; keyword    =  referenceName,  DisplayName

[MegaTune]
 ; https://rusefi.com/forum/viewtopic.php?p=36201#p36201
 	signature    = @@TS_SIGNATURE@@ 

[TunerStudio]
   queryCommand   = "S"
   versionInfo    = "V"  ; firmwave version for title bar.
   signature    = @@TS_SIGNATURE@@ ; signature is expected to be 7 or more characters.

  

[KeyActions]          

showPanel = fp1,  allPins1 
showPanel = fp2,  allPins2 
showPanel = dbg,  debug
showPanel = con,  connection
showPanel = sim,  ecuStimulator
	    
 
		
[Constants]
; new packet serial format with CRC
   messageEnvelopeFormat = msEnvelope_1.0

   endianness          = little
   nPages              = 1
   pageSize = @@TS_CONFIG_SIZE@@
 pageIdentifier      = "\x00\x00"
   ;pageReadCommand     = "R%2o%2c"
   ;burnCommand         = "B"
   ;pageActivate        = "P"
   ;pageValueWrite      = "W%2o%v"
   ;pageChunkWrite      = "C%2o%2c%v"
   ;crc32CheckCommand   = "k%2o%2c"
 ; crc32CheckCommand   = "k%2o\x00\x00\x00\x04"
  ; retrieveConfigError = "e"

 

 
   pageReadCommand     = "R\x00\x00%2o%2c"
   burnCommand         = "B\x00\x00"
   pageActivate        = "P\x00\x00"
   pageValueWrite      = "W\x00\x00%2o%v"
   pageChunkWrite      = "C\x00\x00%2o%2c%v"
  ; crc32CheckCommand   = "k\x00\x00\%2o%2c"
   crc32CheckCommand   = "k\x00\x00\x00\x00\x00\x00"
   retrieveConfigError = "e"

;communication settings
   pageActivationDelay = 500 ; Milliseconds delay after burn command. See https://sourceforge.net/p/rusefi/tickets/77/
;e.g. put writeblocks off and add an interwrite delay
   writeBlocks = on
   interWriteDelay = 10
   blockReadTimeout    = 3000; Milliseconds general timeout
   
  delayAfterPortOpen = 1000 
   
   blockingFactor = 256 ; max chunk size
;end communication settings

   
; CONFIG_DEFINITION_START

; this section will be generated automatically by ConfigDefinition.jar based on rusefi_config.txt

; CONFIG_DEFINITION_END
	idleRpmPid_offset = "Constant base value"
	idleRpmPid_periodMs = "PID recalculation period"
	

[Tuning]
   spotDepth       =   2 ; 0 = no indicators, 1 = Z only, 2 = XYZ indicators.
   cursorDepth     =   2 ; Same as spot depth.

   gaugeColumns = 1 ; Only 1 or 2 are valid.

   pageButtons  = "&EGO"
   gauge1       = RPMGauge	
   gauge2       = afr1Gauge
   gauge3		= MAPGauge
   gauge4		= veValueGauge


[LoggerDefinition]
  ; valid logger types: composite, tooth, trigger, csv
;  loggerDef = compositeLogger, "Primary Trigger Logger", tooth
  loggerDef = compositeLogger, "Trigger Logger", composite
        startCommand = "l\x01"
        stopCommand  = "l\x02"
        dataReadCommand = "L"
        dataReadTimeout = 50000 ; time in ms
        dataReadyCondition = { toothLogReady == 1}
        continuousRead = true
        ; each packet is @@COMPOSITE_PACKET_SIZE@@ and we have @@COMPOSITE_PACKET_COUNT@@ of those
        dataLength = @@COMPOSITE_DATA_LENGTH@@

;tooth
       ; recordDef = headerLen, footerLen, recordLen
;       recordDef =   0,   0,   @@COMPOSITE_PACKET_SIZE@@

       ; uint16 that stores 1/100 second
;       recordField = toothTime, "tooth", 0, 16, 0.01, "ms"


		; recordDef = headerLen, footerLen, recordLen
		recordDef =   0,   0,   @@COMPOSITE_PACKET_SIZE@@

		; these names are hard-coded inside TS
		recordField = priLevel,          "PriLevel",     0,          1,          1.0,    "Flag"
        recordField = secLevel,          "SecLevel",     1,          1,          1.0,    "Flag"
        recordField = trigger,           "Trigger",      2,          1,          1.0,    "Flag"
        recordField = sync,              "Sync",         3,          1,          1.0,    "Flag"
	   recordField = refTime,           "RefTime",      8,          32,         0.01,  "ms"

        ; hidden calcField serves as intermediate variable
        calcField = maxTime,               "MaxTime",   "ms",  { maxValue(refTime) }

        calcField = toothTime,           "ToothTime",    "ms",       { refTime - pastValue(refTime, 1) }
        ;recordField = time,                "Time",       24,         16,         1.0,    "ms"
        calcField = time,                "Time",   "ms",  { refTime }

[VeAnalyze]

        ;    tableName,  lambdaTargetTableName, lambdaChannel, egoCorrectionChannel, activeCondition
       veAnalyzeMap = veTableTbl, afrTableTbl, AFRValue, egoCorrection, { 1 }
       lambdaTargetTables = afrTableTbl, afrTSCustom

       ; filter =  Name,        "DisplayName", outputChannel, operator, defaultVal, userAdjustable
        filter = minRPMFilter, "Minimum RPM", RPMValue,           <       , 500,      , true

         filter = minCltFilter, "Minimum CLT", coolant,       <       , 60,       , true

         filter = deltaTps, "dTPS", deltaTps       >       , 50,      , true

		filter = VBatt, "VBatt", VBatt       <       , 12,      , true

         filter = minTps, "Minimum TPS", TPSValue,       <       , 1,       , true


[OutputChannels]

   ochGetCommand    = "O%2o%2c"

; see TS_OUTPUT_SIZE in console source code
   ochBlockSize     = @@TS_OUTPUT_SIZE@@

;
; see TunerStudioOutputChannels struct
;

; Bit flags
	  hasSdCard       = bits,    U32,      0,    [0:0], "true", "false";
	  isIgnitionEnabledIndicator=bits,U32, 0,    [1:1], "true", "false";
	  ind_injection_enabled=bits,U32,      0,    [2:2], "true", "false";
	  isCylinderCleanupEnabled=bits,U32,   0,    [3:3], "true", "false";
	  isCylinderCleanupActivated=bits,U32, 0,    [4:4], "true", "false";
	  ind_fuel_pump   = bits,    U32,      0,    [5:5], "true", "false";
	  ind_fan         = bits,    U32,      0,    [6:6], "true", "false";
	  ind_o2_heater   = bits,    U32,      0,    [7:7], "true", "false";
      ind_check_engine= bits,    U32,      0,    [8:8], "true", "false";
      needBurn        = bits,    U32,      0,    [9:9], "true", "false";
      ind_2nd_trigger_en=bits,   U32,      0,  [10:10], "true", "false";
      clutchUpState    =bits,    U32,      0,  [11:11], "true", "false";
      clutchDownState  =bits,    U32,      0,  [12:12], "true", "false";
      knockEverIndicator=bits,   U32,      0,  [13:13], "true", "false";
      knockNowIndicator=bits,    U32,      0,  [14:14], "true", "false";
      brakePedalIndicator=bits,  U32,      0,  [15:15], "true", "false";
      toothLogReady      =bits,  U32,      0,  [16:16], "true", "false";
      acSwitchIndicator =bits,   U32,      0,  [17:17], "true", "false";
      ind_tps_error   = bits,    U32,      0,  [18:18], "true", "false";
      ind_clt_error   = bits,    U32,      0,  [19:19], "true", "false";
; not implemented
;      ind_map_error   = bits,    U32,      0,  [20:20], "true", "false";

      ind_iat_error   = bits,    U32,      0,  [21:21], "true", "false";
      ind_isTriggerError = bits, U32,      0,  [23:23], "true", "false";
      ind_hasFatalError=bits,    U32,      0,  [24:24], "true", "false";
	  ind_isWarnNow    =bits,    U32,      0,  [25:25], "true", "false";
	  ind_pedal_error  =bits,    U32,      0,  [26:26], "true", "false";

; RPM, vss
      RPMValue        = scalar,  U16,      4,      "RPM",    1,   0.00000
      rpmAcceleration = scalar,  S16,      6,     "dRpm",{1/@@PACK_MULT_PERCENT@@},         0
      speedToRpmRatio = scalar,  S16,      8,    "value",{1/@@PACK_MULT_PERCENT@@},         0
      vehicleSpeedKph = scalar,  U08,     10,      "kph",    1,       0.0

; temperatures
     internalMcuTemperature = scalar,S08, 11,    "deg C",    1,         0
      coolant         = scalar,  S16,     12,    "deg C",{1/@@PACK_MULT_TEMPERATURE@@},       0.0
      intake          = scalar,  S16,     14,    "deg C",{1/@@PACK_MULT_TEMPERATURE@@},       0.0
      auxt1           = scalar,  S16,     16,    "deg C",{1/@@PACK_MULT_TEMPERATURE@@},       0.0
      auxt2           = scalar,  S16,     18,    "deg C",{1/@@PACK_MULT_TEMPERATURE@@},       0.0
      

; throttle, pedal
      TPSValue        = scalar,  S16,     20,        "%",{1/@@PACK_MULT_PERCENT@@},         0
      throttlePedalPosition = scalar,S16, 22,        "%",{1/@@PACK_MULT_PERCENT@@},         0
      tpsADC          = scalar,  U16,     24,      "ADC",    1,       0.0;

; air flow/mass measurments
      MAFValue        = scalar,  U16,     26,        "V",,{1/@@PACK_MULT_VOLTAGE@@},,         0
      massAirFlowValue= scalar,  U16,     28,     "Kg/h", {1/@@PACK_MULT_MASS_FLOW@@},         0
      MAPValue        = scalar,  U16,     30,     "kPa",{1/@@PACK_MULT_PRESSURE@@},       0.0
      baroPressure    = scalar,  U16,     32,     "kPa",{1/@@PACK_MULT_PRESSURE@@},       0.0
      AFRValue        = scalar,  U16,     34,      "AFR",,{1/@@PACK_MULT_AFR@@},,       0.0
      engineLoad      = scalar,  U16,     36,        "%",{1/@@PACK_MULT_PERCENT@@},       0.0 ; Blend of MAP and TPS, depends on algorithm

; misc sensors
      VBatt           = scalar,	 U16,     38,        "V",,{1/@@PACK_MULT_VOLTAGE@@},,       0.0
      oilPressure     = scalar,  U16,     40,     "kPa",{1/@@PACK_MULT_PRESSURE@@},       0.0
      vvtPosition     = scalar,  U16,     42,      "deg",{1/@@PACK_MULT_ANGLE@@},         0

      ; 10 bit TPS ADC value (from 0 to 1023 in 5v scale)
      ;tpsADC2         = scalar,  U16,    44,             "ADC",            1,       0.0;

; fuel math
      chargeAirMass   = scalar,  U16,     44,        "g",0.001,         0
      crankingFuelMs  = scalar,  U16,     46,     "ms",{1/@@PACK_MULT_MS@@},     0.0
      currentTargetAfr= scalar,  U16,     48,    "ratio",,{1/@@PACK_MULT_AFR@@},,         0
      baseFuel        = scalar,  U16,     50,     "ms",{1/@@PACK_MULT_MS@@},       0
      fuelRunning     = scalar,  U16,     52,     "ms",{1/@@PACK_MULT_MS@@},       0
      actualLastInjection=scalar,U16,     54,     "ms",{1/@@PACK_MULT_MS@@},     0.0
      injectorDutyCycle=scalar,  U08,     56,        "%",  0.5,         0
      veValue         = scalar,  U08,     57,    "ratio",  0.5,         0
      injectionOffset = scalar,  S16,     58,      "deg",{1/@@PACK_MULT_ANGLE@@},         0
      tCharge         = scalar,  U16,     60,    "deg C",{1/@@PACK_MULT_TEMPERATURE@@},       0.0

; Corrections
      injectorLagMs   = scalar,  U16,     62,     "ms",{1/@@PACK_MULT_MS@@},       0.0
      iatCorrection   = scalar,  S16,     64,        "%",{1/@@PACK_MULT_PERCENT@@},         0
      cltCorrection   = scalar,  S16,     66,        "%",{1/@@PACK_MULT_PERCENT@@},         0
      baroCorrection  = scalar,  S16,     68,        "%",{1/@@PACK_MULT_PERCENT@@},         0
      fuelPidCorrection=scalar,  S16,     70,       "%",{1/@@PACK_MULT_PERCENT@@},         0

; Wall model AE
      wallFuelAmount  = scalar,  U16,     72,     "ms",{1/@@PACK_MULT_MS@@},         0
      wallFuelCorrection=scalar, S16,     74,       "ms",0.001,         0

; TPS/load AE
      engineLoadDelta = scalar,  S16,     76,    "value",{1/@@PACK_MULT_PERCENT@@},         0
      deltaTps        = scalar,  S16,     78,    "ratio",{1/@@PACK_MULT_PERCENT@@},         0
      engineLoadAccelExtra=scalar,S16,    80,    "value",{1/@@PACK_MULT_PERCENT@@},         0
      tpsAccelFuel    = scalar,  U16,     82,     "ms",{1/@@PACK_MULT_MS@@},         0

; Ignition
      ignitionAdvance = scalar,  S16,     84,    "deg",{1/@@PACK_MULT_ANGLE@@},       0.0
      sparkDwellValue = scalar,  U16,     86,     "ms",{1/@@PACK_MULT_MS@@},       0.0
      coilDutyCycle   = scalar,  S16,     88,      "%",{1/@@PACK_MULT_PERCENT@@},         0

; Idle & ETB
      idleAirValvePosition=scalar,S16,    90,      "%",{1/@@PACK_MULT_PERCENT@@},         0
      etbTarget       = scalar,  S16,     92,      "%",{1/@@PACK_MULT_PERCENT@@},         0
      etb1DutyCycle   = scalar,  S16,     94,      "%",{1/@@PACK_MULT_PERCENT@@},         0
      etb1Error       = scalar,  S16,     96,      "%",{1/@@PACK_MULT_PERCENT@@},         0

; Fuel system
      fuelTankLevel   = scalar,  S16,     98, "amount",{1/@@PACK_MULT_PERCENT@@},         0
      fuelConsumptionPerHour=scalar,F32, 100,    "kPa",      1,      0.0

; Knock
      knockCount      = scalar,  U32,    104,"counter",      1,         0
      knockLevel      = scalar,  F32,    108,  "Volts",      1,         0

; Mode, firmware, protocol, run time
; TS requires 'seconds' name since it has special internal meaning
      seconds         = scalar,  U32,    112,    "sec",      1,       0.0
      engineMode      = scalar,  U32,    116,     "em",      1,       0.0;
      firmwareVersion = scalar,  U32,    120,"version_f",    1,         0


; calibation helpers
      calibrationValue = scalar, F32, 128, "", 1, 0
      calibrationMode = scalar, U08, 132, "", 1, 0
      ; 1 bytes padding1
      
      fuelingLoad     = scalar, U16,     134,      "%",     0.01, 0
      ignitionLoad    = scalar, U16,     136,      "%",     0.01, 0

; Errors
      totalTriggerErrorCounter=scalar,U32,   140,"counter",           1,         0
      ; orderingErrorCounter 144
      warningCounter  = scalar,  U16,    148,  "count",           1,         0
      lastErrorCode   = scalar,  U16,    150,  "error",           1,         0
      recentErrorCode0= scalar,  U16,    152,  "error",           1,         0
      recentErrorCode1= scalar,  U16,    154,  "error",           1,         0
      recentErrorCode2= scalar,  U16,    156,  "error",           1,         0
      recentErrorCode3= scalar,  U16,    158,  "error",           1,         0
      recentErrorCode4= scalar,  U16,    160,  "error",           1,         0
      recentErrorCode5= scalar,  U16,    162,  "error",           1,         0
      recentErrorCode6= scalar,  U16,    164,  "error",           1,         0
      recentErrorCode7= scalar,  U16,    166,  "error",           1,         0

; Debug
      debugFloatField1= scalar,  F32,    168,    "val",           1,       0.0
      debugFloatField2= scalar,  F32,    172,    "val",           1,       0.0
      debugFloatField3= scalar,  F32,    176,    "val",           1,       0.0
      debugFloatField4= scalar,  F32,    180,    "val",           1,       0.0
      debugFloatField5= scalar,  F32,    184,    "val",           1,       0.0
      debugFloatField6= scalar,  F32,    188,    "val",           1,       0.0
      debugFloatField7= scalar,  F32,    192,    "val",           1,       0.0
      debugIntField1  = scalar,  S32,    196,    "val",           1,       0.0
      debugIntField2  = scalar,  S32,    200,    "val",           1,       0.0
      debugIntField3  = scalar,  S32,    204,    "val",           1,       0.0
      debugIntField4  = scalar,  S16,    208,    "val",           1,       0.0
      debugIntField5  = scalar,  S16,    210,    "val",           1,       0.0

; Accel
      accelerationX   = scalar,  S16,    212,      "G",        0.01,         0
      accelerationY   = scalar,  S16,    214,      "G",        0.01,         0

; egt
      egt1            = scalar,  S16,    216,  "deg C",      1,         0
      egt2            = scalar,  S16,    218,  "deg C",      1,         0
      egt3            = scalar,  S16,    220,  "deg C",      1,         0
      egt4            = scalar,  S16,    222,  "deg C",      1,         0
      egt5            = scalar,  S16,    224,  "deg C",      1,         0
      egt6            = scalar,  S16,    226,  "deg C",      1,         0
      egt7            = scalar,  S16,    228,  "deg C",      1,         0
      egt8            = scalar,  S16,    230,  "deg C",      1,         0

      TPS2Value       = scalar,  S16,    232,        "%",{1/@@PACK_MULT_PERCENT@@},         0

      rawTps1Primary  = scalar,	 U16,    234, "V",{1/@@PACK_MULT_VOLTAGE@@}, 0.0
      rawPpsPrimary   = scalar,	 U16,    236, "V",{1/@@PACK_MULT_VOLTAGE@@}, 0.0
      rawClt          = scalar,	 U16,    238, "V",{1/@@PACK_MULT_VOLTAGE@@}, 0.0
      rawIat          = scalar,	 U16,    240, "V",{1/@@PACK_MULT_VOLTAGE@@}, 0.0
      rawOilPressure  = scalar,	 U16,    242, "V",{1/@@PACK_MULT_VOLTAGE@@}, 0.0
      rawPpsSecondary = scalar,	 U16,    248, "V",{1/@@PACK_MULT_VOLTAGE@@}, 0.0

	; we use this to match logs to tunes
	tuneCrc16         = scalar,  U16,    244, "crc16",           1,         0
	widebandIdent	= scalar,  S16,    246,    "val",           1,       0.0

 	map_bar      = { (MAPValue - 100) / 101.33 }
;
; see TunerStudioOutputChannels struct
;

; todo: generate this section programatically
	LM_SPEED_DENSITY = {3},
	LM_REAL_MAF = {4}

      egoCorrection   = { 100 }
      time            = { timeNow }

	; These "synthetic" channels provide the Y-axis (load) value for gen purp PWM table's Y axes
	gppwm1_load = {(gppwm1_loadAxis == 0) ? TPSValue : ((gppwm1_loadAxis == 1) ? MAPValue : ((gppwm1_loadAxis == 2) ? coolant : ((gppwm1_loadAxis == 3) ? intake : ((gppwm1_loadAxis == 4) ? fuelingLoad : ignitionLoad))))}
	gppwm2_load = {(gppwm2_loadAxis == 0) ? TPSValue : ((gppwm2_loadAxis == 1) ? MAPValue : ((gppwm2_loadAxis == 2) ? coolant : ((gppwm2_loadAxis == 3) ? intake : ((gppwm2_loadAxis == 4) ? fuelingLoad : ignitionLoad))))}
	gppwm3_load = {(gppwm3_loadAxis == 0) ? TPSValue : ((gppwm3_loadAxis == 1) ? MAPValue : ((gppwm3_loadAxis == 2) ? coolant : ((gppwm3_loadAxis == 3) ? intake : ((gppwm3_loadAxis == 4) ? fuelingLoad : ignitionLoad))))}
	gppwm4_load = {(gppwm4_loadAxis == 0) ? TPSValue : ((gppwm4_loadAxis == 1) ? MAPValue : ((gppwm4_loadAxis == 2) ? coolant : ((gppwm4_loadAxis == 3) ? intake : ((gppwm4_loadAxis == 4) ? fuelingLoad : ignitionLoad))))}
	vvtLoad = 		{ (vvt_vvtLoadAxis == 0) ? MAPValue : TPSValue }

[PcVariables]
	
 	
    wueAfrTargetOffset = array, S16, [ 16], ":1",   0.1, 0.0, -3.0, 3.0, 1
    wueAnalRecommend   = array, U08, [ 16], "%",  1.00, 0.0, 100, 255.00, 0

    algorithmUnits 			= bits,    	U08,   	[0:2], 	"INVALID",  "INVALID",   "INVALID", "KPA", "Kg/h", "TPS"
    troubleList  			= bits,   	U08,   	[0:7], 	"Ok", 	"Electronic Throttle out of range", "MAP Sensor out of range", "IAT Sensor out of range", "CLT Sensor out of range", "TPS Voltage too low", "TPS Voltage too high", "Crank Sensor error", "Cam Position sensor out of range", "Oil Pressure sensor out of range", "System Voltage out of range", "Processor error", "Invalid TPS Setting", "Pin already used", "Pin already used" ,"Analog Input Already Used", "Zero Cranking Fuel" , "Analog Input Not Configured" , "Duty Too High" 
    vvtLoadUnits 			= bits,    	U08,   	[0:1], 	"kPa", "%", "INVALID", "INVALID"
; These are inverted (false = "Yes") so that they default to enabled
	enableLogDebugChannels = bits, U08, [0:0], "Yes", "No"
	enableLogErrorList = bits, U08, [0:0], "Yes", "No"

; wall of debug mode :)
; https://rusefi.com/wiki/index.php?title=Manual:Debug_fields
;                                            0                     1                     2            3                           4                      5                            6             7              8                    9            10                   11       12           13          14             15            16              17                       18                 19            20              21               22                23         24           25                26           27         28        29      30       31                32                      33     34       35       36                       37              38            39                40               41           42           43
;											 Alternator            TPS Acceleration      Warmup-Pid   Idle                        Engine Load Acc        Trigger Counters                                          VVT                  Cranking     Ignition Timing                                                                                     ETB PID                                                                                                     FSIO_1_7                 CJ125             CAN                                                TLE8888           Analog inputs 2         Boost                    Start           Launcher      ETB Autotune                                                FSIO_8_14    FSIO_SPECIAL
;                                            DBG_ALTERNATOR_PID    DBG_TPS_ACCEL         DBG_2        DBG_IDLE_CONTROL
    debugFieldF1List = bits,   U08,   [0:7], "Controller Output",  "From TPS",           "",          "Controller Output",        "Idle output",         "Channel 1 Rise Counter",    "",           "",            "VVT Event Position","",          "Ign IAT Corr",      "",      "",         "",         "",            "",           "",             "ETB Controller Output", "",                "",           "df1",          "df1",           "22df1",          "fsio 1",  "24:df1",     "CJ125: output",  "",          "",         "",       "",     "",     "",               "TPS1 Pri/Sec Diff",    "",    "",      "",      "Boost Open Loop Duty",  "S unused"      "ActivatePinState",           	"Osc Amplitude",  "",              "fsio 8",    "idle offset",""
    debugFieldF2List = bits,   U08,   [0:7], "I-Term",             "To TPS",             "",          "I-Term",                   "Idle df2",            "Channel 2 Rise Counter",    "",           "",            "VVT Ratio",         "",          "Ign CLT Corr",      "",      "",         "",         "",            "",           "",             "ETB I-Term",            "",                "",           "df2",          "df2",           "22df2",          "fsio 2",  "24:df2",     "CJ125: i-term",  "",          "",         "",       "",     "",     "",               "TPS2 Pri/Sec Diff",    "",    "",      "",      "Boost Closed Loop Duty","S unused"      "isLaunchCondition",           	"Duty Amplitude", "",              "fsio 9",    "idle min",   ""
    debugFieldF3List = bits,   U08,   [0:7], "Previous Error",     "Current TPS<>TPS",   "",          "prev error",               "Idle df3",            "ICU sum",                   "",           "",            "",                  "",          "Ign FSIO Adj",      "",      "",         "",         "",            "",           "",             "ETB err",               "",                "",           "df3",          "df3",           "22df3",          "fsio 3",  "24:df3",     "CJ125: err",     "",          "",         "",       "",     "",     "",               "",                     "",    "",      "",      "",                      "S unused"      "clutchDownState",           	"Tu",             "",              "fsio 10",   "",           ""
    debugFieldF4List = bits,   U08,   [0:7], "I Gain",             "Extra Fuel",         "",          "I Gain",                   "Idle df4",            "VVT rise",                  "",           "",            "",                  "",          "Ign PID Adj",       "",      "",         "",         "",            "",           "",             "ETB I setting",         "",                "",           "df4",          "df4",           "22df4",          "fsio 4",  "24:df4",     "CJ125: UA",      "",          "",         "",       "",     "",     "",               "",                     "",    "",      "",      "",                      "S unused"      "launchControlEnabled",           "Ku",             "",              "fsio 11",   "",           ""
    debugFieldF5List = bits,   U08,   [0:7], "D Gain",             "df5",                "df5",       "D Gain",                   "Idle df5",            "VVT fall",                  "df5",        "",            "",                  "",          "",                  "",      "",         "",         "",            "",           "",             "ETB D setting",         "df5",             "df5",        "df5",          "df5",           "22df5",          "fsio 5",  "24:df5",     "CJ125: UR",      "",          "",         "",       "",     "",     "",               "",                     "",    "",      "",      "",                      "S unused"      "",           					"Kp",             "",              "fsio 12",   "",           ""
    debugFieldF6List = bits,   U08,   [0:7], "D Term",             "",                   "",          "D Term",                   "Idle df6",            "Current Gap",               "",           "",            "",                  "",          "",                  "",      "",         "",         "",            "",           "",             "ETB df6",               "",                "",           "df6",          "df6",           "22df6",          "fsio 6",  "24:df6",     "cj: f7",         "",          "",         "",       "",     "",     "",               "",                     "",    "",      "",      "",                      "S unused"      "",           "Ki",             	"",              "fsio 13",   "",           ""
    debugFieldF7List = bits,   U08,   [0:7], "Max-Value",          "",                   "",          "Max-Value",                "Idle df7",            "",                          "",           "",            "",                  "",          "",                  "",      "",         "",         "",            "",           "",             "ETB df7",               "",                "",           "df7",          "df7",           "22df7",          "fsio 7",  "24:df7",     "cj: f7",         "",          "",         "",       "",     "",     "",               "",                     "",    "",      "",      "",                      "S unused"      "",           "Kd",             	"",              "fsio 14",   "",           ""

    debugFieldI1List = bits,   U08,   [0:7], "P-Gain",             "",                   "",          "P-Gain",                   "Idle di1",            "Channel 1 Fall Counter",    "",           "",            "VVT Sync Counter",  "",          "Multispark Count",  "",      "",         "",         "",            "",           "",             "ETB P-Gain",            "",                "",           "di1",          "di1",           "22di1",          "",        "24:di1",     "CJ125: state",   "read count","",         "",       "",     "",     "SPI Counter",    "",                     "",    "",      "",      "",                      "Start Count"   "rpmCondition",           		"",               "",              "",          "",           ""
    debugFieldI2List = bits,   U08,   [0:7], "Offset",             "",                   "",          "Offset",                   "Idle di2",            "Channel 2 Fall Counter",    "",           "",            "",                  "",          "",                  "",      "",         "",         "",            "",           "",             "ETB di2",               "",                "",           "di2",          "di2",           "22di2",          "",        "24:di2",     "",               "write count","",        "",       "",     "",     "Latest Transmit","",                     "",    "",      "",      "",                      "S unused"      "tpsCondition",           		"",               "",              "",          "",           ""
    debugFieldI3List = bits,   U08,   [0:7], "Reset Cnt",          "",                   "",          "Reset Cnt",                "Idle di3",            "Cycle Index",               "",           "",            "",                  "",          "",                  "",      "",         "",         "",            "",           "",             "ETB di3",               "",                "",           "di3",          "di3",           "22di3",          "",        "24:di3",     "",               "write err", "",         "",       "",     "",     "Latest Received","",                     "",    "",      "",      "",                      "S unused"      "speedCondition",           		"",               "",              "",          "",           ""
    debugFieldI4List = bits,   U08,   [0:7], "Period",             "",                   "",          "State",                    "Idle di4",            "Cycle Cnt 1",               "",           "",            "",                  "",          "",                  "",      "",         "",         "",            "",           "",             "ETB di4",               "",                "",           "di4",          "di4",           "22di4",          "",        "24:di4",      "",              "",          "",         "",       "",     "",     "Init Count",     "",                     "",    "",      "",      "",                      "S unused"      "SwitchCondition",           	"",               "",              "",          "",           ""
    debugFieldI5List = bits,   U08,   [0:7], "",                   "",                   "",          "",                         "Idle di5",            "Cycle Cnt 2",               "",           "",            "",                  "",          "",                  "",      "",         "",         "",            "di5",        "di5",          "ETB di5",               "di5",             "di5",        "di5",          "di5",           "22di5",          "di5",     "di5",        "di5",            "di5",       "di5",      "di5",    "di5",  "di5",  "di5",            "",                     "di5", "di5",   "di5",   "di5",                   "S di5"         "combinedConditions",           "",               "",              "",          "",           ""

[ConstantsExtensions]
     ; defaultValue is used to provide TunerStudio with a value to use in the case of
     ; the constant not yet being initialized. This is primarily important if the
     ; constant is used as a variable in the ini.
     ; defaultValue = constantName, value;
    defaultValue = wueAfrTargetOffset, -1.5 -1.4 -1.15 -0.95 -0.775 -0.65 -0.5625 -0.5 -0.4375 -0.375 -0.3125 -0.25 -0.1875 -0.125 -0.0625 0

	; TPS 1 Primary
	maintainConstantValue = tpsMax, { (calibrationMode == 1 ) ? calibrationValue : tpsMax }
	maintainConstantValue = tpsMin, { (calibrationMode == 2 ) ? calibrationValue : tpsMin }

	; TPS 1 Secondary
	maintainConstantValue = tps1SecondaryMax, { (calibrationMode == 6 ) ? calibrationValue : tps1SecondaryMax }
	maintainConstantValue = tps1SecondaryMin, { (calibrationMode == 7 ) ? calibrationValue : tps1SecondaryMin }

	; TPS 2 Primary
	maintainConstantValue = tps2Max, { (calibrationMode == 8 ) ? calibrationValue : tps2Max }
	maintainConstantValue = tps2Min, { (calibrationMode == 9 ) ? calibrationValue : tps2Min }

	; TPS 2 Secondary
	maintainConstantValue = tps2SecondaryMax, { (calibrationMode == 10 ) ? calibrationValue : tps2SecondaryMax }
	maintainConstantValue = tps2SecondaryMin, { (calibrationMode == 11 ) ? calibrationValue : tps2SecondaryMin }

	; ETB Auto Gain Calibration
	maintainConstantValue = etb_pFactor, { (calibrationMode == 3 ) ? calibrationValue : etb_pFactor }
	maintainConstantValue = etb_iFactor, { (calibrationMode == 4 ) ? calibrationValue : etb_iFactor }
	maintainConstantValue = etb_dFactor, { (calibrationMode == 5 ) ? calibrationValue : etb_dFactor }




[CurveEditor]
;	xAxis       =  leftValue, rightValue, step
;	yAxis       =  bottomValue, topValue, step

curve = narrowToWideOxygenCurve, "Narrow to Wideband approximation"
    columnLabel 	= "Voltage", "AFR"
    xAxis       	=  0, 6, 10
    yAxis       	=  0,  28, 10
    xBins       	= narrowToWideOxygenBins
    yBins       	= narrowToWideOxygen
    suppressGraph 	= true
    showTextValues 	= true


curve = mapAccelTaper, "Engine Load Acceleration Enrichment Decay"
    columnLabel 	= "", ""
    xAxis       	=  0, 128, 10
    yAxis       	= -50,  100, 5
    xBins       	= loadBasedAeDecayBins
    yBins       	= loadBasedAeDecayMult
	 showTextValues 	= true

curve = dwellCorrection, "Dwell time RPM based"
    columnLabel 	= "RPM", "Dwell"
    xAxis       	=  0, 8000, 10
    yAxis       	=  0,  30, 10
    xBins       	= sparkDwellRpmBins, RPMValue
    yBins       	= sparkDwellValues
    suppressGraph 	= true
    showTextValues 	= true
    
curve = injectorsDeadTime, "Injector Dead Time"
    columnLabel 	= "Voltage", "Dead Time"
    xAxis       	=  8, 21, 10
    yAxis       	= -3,  3, 10
    xBins       	= injector_battLagCorrBins, VBatt
    yBins       	= injector_battLagCorr
    suppressGraph 	= true
    showTextValues 	= true
	  	  

curve = afterstartHoldTimeCurve, "AfterStart Hold Time"
    columnLabel 	= "Coolant Temp", "Seconds"
    xAxis       	=  -40, 120, 10
    yAxis       	=  0,  50, 11
    xBins       	= afterstartCoolantBins, coolant
     yBins       	= afterstartHoldTime
	suppressGraph 	= true
    showTextValues 	= true


curve = afterstartDecayCurve, "AfterStart Decay Time"
    columnLabel 	= "Coolant Temp", "Seconds"
    xAxis       	=  -40, 120, 10
    yAxis       	=  0,  50, 11
    xBins       	= afterstartCoolantBins, coolant
    yBins       	= afterstartDecayTime
	suppressGraph 	= true
    showTextValues 	= true

curve = afterstartEnrichCurve, "AfterStart Enrichment     Addition To Normal Fueling In %"
    columnLabel 	= "Coolant Temp", "%"
    xAxis       	=  -40, 120, 10
    yAxis       	=  0,  2, 11
    xBins       	= afterstartCoolantBins, coolant
    yBins       	= afterstartEnrich
	suppressGraph 	= true
    showTextValues 	= true

curve = iatFuelCorrCurve, "IAT Warmup Correction     Correction +/- In % To Normal Fueling"
    columnLabel 	= "Intake Air Temp", "% Trim"
    xAxis       	=  -40, 120, 10
    yAxis       	=  0,  2, 11
    xBins       	= iatFuelCorrBins, intake
    yBins       	= iatFuelCorr
	suppressGraph 	= true
    showTextValues 	= true
	
curve = cltFuelCorrCurve, "Warmup Enrichment    Correction +/- In % To Normal Fueling"
    columnLabel 	= "Coolant", "% Trim"
    xAxis       	=  -40, 100, 10
    yAxis       	=  0,  3, 10
    xBins       	= cltFuelCorrBins, coolant
    yBins       	= cltFuelCorr
	showTextValues 	= true
    suppressGraph 	= true

curve = crankingCltCurve, "Cranking Enrichment    Addition To Normal Fueling In %"
    columnLabel 	= "Coolant", "%"
    xAxis       	=  -40, 100, 10
    yAxis       	=  0,  3, 10
    xBins       	= crankingFuelBins, coolant
    yBins       	= crankingFuelCoef
	showTextValues 	= true
    suppressGraph 	= true

curve = etbTpsBiasCurve, "Feed Forward"
    columnLabel 	= "TPS Position", "Duty Cycle"
    xAxis       	=  0, 100, 10
    yAxis       	=  0,  100, 10
    xBins       	= etbBiasBins, TPSValue
    yBins       	= etbBiasValues
	showTextValues 	= true
    suppressGraph 	= true

curve = crankingTpsCurve, "Cranking TPS Correction"
    columnLabel 	= "TPS", "% Trim"
    xAxis       	=  0, 100, 10
    yAxis       	=  0,  3, 10
    xBins       	= crankingTpsBins, TPSValue
    yBins       	= crankingTpsCoef
	suppressGraph 	= true
    showTextValues 	= true

curve = crankingDurationCurve, "First Crank Enrichment     Addition To Cranking Enrichment in %"
    columnLabel 	= "Engine Cycle", "%"
    xAxis       	=  0, 1000, 10
    yAxis       	=  0,  3, 10
    xBins       	= crankingCycleBins
    yBins       	= crankingCycleCoef
	showTextValues 	= true
    suppressGraph 	= true

curve = cltIdleCurve, "Warmup Idle Correction"
    columnLabel 	= "Coolant", "% Trim"
	xAxis       	= -40, 120, 10
    yAxis       	=  0,  3, 10
    xBins       	= cltIdleCorrBins, coolant
    yBins       	= cltIdleCorr
	suppressGraph 	= true
    showTextValues 	= true

curve = iacCoastingCurve, "Coasting IAC Position for Auto-Idle"
    columnLabel 	= "Coolant", "%"
    xAxis       	= -40, 120, 10
    yAxis       	=  0,  100, 10
    xBins       	= iacCoastingBins, coolant
    yBins       	= iacCoasting
    gauge       	= idleAirValvePositionGauge

curve = cltCrankingCurve, "Cranking Idle Air Correction"
    columnLabel 	= "Coolant", "% Trim"
    xAxis       	= -40, 120, 10
    yAxis       	=  0,  3, 10
    xBins       	= cltCrankingCorrBins, coolant
    yBins       	= cltCrankingCorr
	suppressGraph 	= true
    showTextValues 	= true

curve = cltIdleRPMCurve, "Idle Target RPM"
    columnLabel 	= "Coolant", "RPM"
    xAxis       	= -40, 120, 10
    yAxis       	=  0, 8000, 10
    xBins       	= cltIdleRpmBins, coolant
    yBins       	= cltIdleRpm, RPMValue
	suppressGraph 	= true
    showTextValues 	= true

curve = idleAdvanceCurve, "Idle Advance Angle"
    columnLabel 	= "RPM", "degrees"
    xAxis       	= 0, 8000, 10
    yAxis       	= -100, 100, 10
    xBins       	= idleAdvanceBins, RPMValue
    yBins       	= idleAdvance
	suppressGraph 	= true
    showTextValues 	= true

curve = idleVeCurve, "Idle Fuel Table"
    columnLabel 	= "RPM", "%"
    xAxis       	= 0, 8000, 10
    yAxis       	= 0, 250, 10
    xBins       	= idleVeBins, RPMValue
    yBins       	= idleVe
    suppressGraph 	= true
    showTextValues 	= true
    
curve = crankingAdvanceCurve, "Cranking Advance Angle"
    columnLabel 	= "RPM", "Degrees"
    xAxis       	= 0, 8000, 10
    yAxis       	= -100, 100, 10
    xBins       	= crankingAdvanceBins, RPMValue
    yBins       	= crankingAdvance
    suppressGraph 	= true
    showTextValues 	= true

; Warmup enrichment VEAL AFR adjustment curves
       
			
        curve = warmup_analyzer_curve, "Warmup Enrichment"
            columnLabel = "Coolant", "Current WUE", "Coolant", "Recommended WUE"
            xAxis       = -40, 210, 9
            yAxis       = 100, 255, 6
            xBins       = cltFuelCorrBins, coolant
     		yBins       = cltFuelCorr
      
            lineLabel   = "Current WUE"
            lineLabel   = "Recommended WUE"


    curve = wueAfrTargetOffsetCurve, "AFR Target Temperature Adjustment"
      columnLabel = "Coolant", "AFR Offset"
      xAxis       = -40, 200, 9
      yAxis       =   -3,  1, 5
      xBins       = cltFuelCorrBins, coolant
      yBins       = wueAfrTargetOffset
     

    curve = wueAnalyzer_warmup_curve, "Warmup Enrichment"
      columnLabel = "Coolant", "Current WUE", "Coolant", "Corrected"
      xAxis       = -40, 200, 9
      yAxis       =   90,  500, 6
      xBins       = cltFuelCorrBins, coolant
      yBins       = cltFuelCorr
      yBins       = wueAnalRecommend
      ;gauge       = cltGauge
          
      lineLabel   = "Current WUE"
        lineLabel   = "Recommended WUE"

[TableEditor]
   ;       table_id,    map3d_id,    "title",      page

table = veTableTbl,  veTableMap,  "Fuel Table",   1
	xyLabels 	= "RPM", "LOAD"
    xBins       = frpm_table,  RPMValue
    yBins       = fmap_table,   fuelingLoad
    zBins       = veTable
    gridOrient  = 250,   0, 340 
    upDownLabel = "(RICHER)", "(LEANER)"



table = ignitionTableTbl,  ignitionTableMap,  "Ignition Table",   1
xyLabels 	= "RPM", "LOAD"
    xBins       = srpm_table,  RPMValue	
 	yBins       = smap_table,  ignitionLoad
    zBins       = advanceTable
    gridOrient  = 250,   0, 340 
    upDownLabel = "(RICHER)", "(LEANER)"
	

       table = boostTableTbl,  boostMapOpen,  "Boost Open",   1
      xBins       = boostRpmBins,  RPMValue
      yBins       = boostTpsBins,  TPSValue
      zBins       = boostTableOpenLoop

	table = boostTable2Tbl,  boostMapClosed,  "Boost Closed",   1
      xBins       = boostRpmBins,  RPMValue
      yBins       = boostTpsBins,  TPSValue
      zBins       = boostTableClosedLoop

table = tpsTpsAccelTbl,  tpsTpsAccelMap,  "TPS/TPS Acceleration Enrichment(ms)",   1
   	topicHelp 	= "tpstpsHelp"
	xyLabels 	= "From TPS", ""
    xBins       = tpsTpsAccelFromRpmBins,  TPSValue
    yBins       = tpsTpsAccelToRpmBins,  TPSValue
    zBins       = tpsTpsAccelTable


table = vvtTableTbl,  vvtMap,  "",   1
	xyLabels 	= "RPM", ""
    xBins       = vvtRpmBins,  RPMValue
    yBins       = vvtLoadBins,  vvtLoad
    zBins       = vvtTable
 



	
table = ignitionIatCorrTableTbl,  ignitionIatCorrTableMap,  "Ignition Intake Air Temp Correction",   1
	xyLabels = "RPM", "IAT"
    xBins       = ignitionIatCorrRpmBins,  RPMValue
    yBins       = ignitionIatCorrLoadBins,  intake
    zBins       = ignitionIatCorrTable
    gridOrient  = 250,   0, 340
    upDownLabel = "(RICHER)", "(LEANER)"




table = injPhaseTableTbl,  injPhaseTableMap,  "Injection Phase",   1
   	topicHelp 	= "fuelHelp"
  	xyLabels 	= "RPM", "LOAD"
    xBins       = injPhaseRpmBins,  RPMValue
    yBins       = injPhaseLoadBins,  fuelingLoad
    zBins       = injectionPhase
    gridOrient  = 250,   0, 340 
    upDownLabel = "(Later)", "(Sooner)"

table = pedalToTpsTbl,  pedalToTpsMap,  "Throttle Target Position",   1
	xyLabels 	= "RPM", "% TPS"
    xBins       = pedalToTpsRpmBins,  RPMValue
    yBins       = pedalToTpsPedalBins,  throttlePedalPosition
    zBins       = pedalToTpsTable
	gridOrient  = 250,   0, 340 
    upDownLabel = "(Later)", "(Sooner)"


   table = afrTableTbl,  afrTableMap,  "Target AFR Table",   1
      ;       constant, variable
      xBins       = afrRpmBins,  RPMValue
      yBins       = afrLoadBins,  fuelingLoad
      zBins       = afrTable
;      gridHeight  = 2.0
      gridOrient  = 250,   0, 340 ; Space 123 rotation of grid in degrees.
      upDownLabel = "(RICHER)", "(LEANER)"

table = iacPidMultTbl,  iacPidMultMap,  "IAC PID Multiplier Table",   1
	xyLabels 	= "RPM", "LOAD"
    xBins       = iacPidMultRpmBins,  RPMValue
    yBins       = iacPidMultLoadBins,  fuelingLoad
    zBins       = iacPidMultTable
    gridOrient  = 250,   0, 340
    upDownLabel = "(Later)", "(Sooner)"

	table = gppwm1Tbl, gppwm1Map, "GP#1", 1
		xyLabels = "RPM", ""
		xBins = gppwm1_rpmBins, RPMValue
		yBins = gppwm1_loadBins, gppwm1_load
		zBins = gppwm1_table

	table = gppwm2Tbl, gppwm2Map, "GP#2", 1
		xyLabels = "RPM", ""
		xBins = gppwm2_rpmBins, RPMValue
		yBins = gppwm2_loadBins, gppwm2_load
		zBins = gppwm2_table

	table = gppwm3Tbl, gppwm3Map, "GP#3", 1
		xyLabels = "RPM", ""
		xBins = gppwm3_rpmBins, RPMValue
		yBins = gppwm3_loadBins, gppwm3_load
		zBins = gppwm3_table

	table = gppwm4Tbl, gppwm4Map, "GP#4", 1
		xyLabels = "RPM", ""
		xBins = gppwm4_rpmBins, RPMValue
		yBins = gppwm4_loadBins, gppwm4_load
		zBins = gppwm4_table

[GaugeConfigurations]

gaugeCategory = Sensors - Extra 2

   	rpmAccelerationGa = rpmAcceleration,     "rpm delta",        "dRpm",        0,      3,       0,      1,       3,     4,   1,   1
   	fuelTankLevelGauge   = fuelTankLevel,"Fuel level",           "x",        0,      7,      10,     10,     100,   100,   1,   2
   	speedToRpmRatioGauge = speedToRpmRatio, "speed2rpm", "",     0,   100,     0,    0,    100,  100,   4,   4
 	

gaugeCategory = ECU Status
  
   
	warningCounterGauge = warningCounter, "Warning count", "",     0,   100,     0,    0,    100,  100,   0,   0
   	lastErrorCodeGauge = lastErrorCode, "Last error", "",     0,  18000,     0,    0,   18000, 18000,   0,   0
   	triggerErrorsCounterGauge = totalTriggerErrorCounter, "Trigger error count", "count",     0,   15000,     0,    0,    6000,  6000,   0,   0
   	recentErrorCode0Gauge = recentErrorCode0, "Error#1", "",     0,  18000,     0,    0,   18000, 18000,   0,   0
   	recentErrorCode1Gauge = recentErrorCode1, "Error#2", "",     0,  18000,     0,    0,   18000, 18000,   0,   0
   	recentErrorCode2Gauge = recentErrorCode2, "Error#3", "",     0,  18000,     0,    0,   18000, 18000,   0,   0
   	recentErrorCode3Gauge = recentErrorCode3, "Error#4", "",     0,  18000,     0,    0,   18000, 18000,   0,   0
   	recentErrorCode4Gauge = recentErrorCode4, "Error#5", "",     0,  18000,     0,    0,   18000, 18000,   0,   0
   	recentErrorCode5Gauge = recentErrorCode5, "Error#6", "",     0,  18000,     0,    0,   18000, 18000,   0,   0
   	recentErrorCode6Gauge = recentErrorCode6, "Error#7", "",     0,  18000,     0,    0,   18000, 18000,   0,   0
   	recentErrorCode7Gauge = recentErrorCode7, "Error#8", "",     0,  18000,     0,    0,   18000, 18000,   0,   0


gaugeCategory = Debug  
  debugF1Gauge = debugFloatField1, {bitStringValue( debugFieldF1List,  debugMode )}, "",     0,   100,     0,    0,    100,  100,   4,   4
  debugF2Gauge = debugFloatField2, {bitStringValue( debugFieldF2List,  debugMode )}, "",  -100,   100,     0,    0,    100,  100,   4,   4
  debugF3Gauge = debugFloatField3, {bitStringValue( debugFieldF3List,  debugMode )}, "",  -100,   100,     0,    0,    100,  100,   4,   4
  debugF4Gauge = debugFloatField4, {bitStringValue( debugFieldF4List,  debugMode )}, "",     0,   100,     0,    0,    100,  100,   4,   4
  debugF5Gauge = debugFloatField5, {bitStringValue( debugFieldF5List,  debugMode )}, "",     0,   100,     0,    0,    100,  100,   4,   4
  debugF6Gauge = debugFloatField6, {bitStringValue( debugFieldF6List,  debugMode )}, "",  -100,   100,     0,    0,    100,  100,   4,   4
  debugF7Gauge = debugFloatField7, {bitStringValue( debugFieldF7List,  debugMode )}, "",     0,   100,     0,    0,    100,  100,   4,   4
  debugI1Gauge = debugIntField1,   {bitStringValue( debugFieldI1List,  debugMode )}, "",     0,   100,     0,    0,    100,  100,   0,   0
  debugI2Gauge = debugIntField2,   {bitStringValue( debugFieldI2List,  debugMode )}, "",     0,   100,     0,    0,    100,  100,   0,   0
  debugI3Gauge = debugIntField3,   {bitStringValue( debugFieldI3List,  debugMode )}, "",     0,   100,     0,    0,    100,  100,   0,   0
  debugI4Gauge = debugIntField4,   {bitStringValue( debugFieldI4List,  debugMode )}, "",     0,   100,     0,    0,    100,  100,   0,   0
  debugI5Gauge = debugIntField5,   {bitStringValue( debugFieldI5List,  debugMode )}, "",     0,   100,     0,    0,    100,  100,   0,   0


gaugeCategory = Sensors - Basic
   RPMGauge        = RPMValue,           "RPM - engine speed",       "RPM",       0,   15000,     200,    500,    6000,  6000,   0,   0
   CLTGauge          = coolant,       "Coolant temp",        "deg C",      -40,    140,     -15,      1,      95,   110,   1,   1
   IATGauge          = intake,     "Intake air temp",        "deg C",      -40,    140,     -15,      1,      95,   110,   1,   1
   afr1Gauge         = AFRValue, "Air fuel ratio",          "",       10,   19.4,      12,     13,      15,    16,   2,   1
   MAFGauge			 = MAFValue,          "Mass air flow",         "v",        0,      5,       0,      1,       3,     4,   1,   1
   VBattGauge        = VBatt,      "Battery voltage",         "V",        8,     21,       9,     10,      17,    19,   1,   1
   MAPGauge     	 = MAPValue,               "MAP",       "kPa",        0,    300,      10,     10,     200,   200,   0,   0	
   mapGauge_bar      = map_bar,       "Engine MAP (BAR)",       "Bar",          -1,     3,      -1,     -1,    5,  5,  2, 1

  
;Name                 Var                    Title           Units       Lo     Hi      LoD     LoW      HiW   HiD   vd   ld

gaugeCategory = Other Sensors
   	VSSGauge          = vehicleSpeedKph,     "Vehicle speed",         "kmh",        0,    200,       0,      1,       3,     4,   1,   1
   	atmPresCGauge     = baroPressure,          "Barometric pressure",       "kPa",        0,   1024,       0,      0,       0,     0,   0,   0
   	vvtPositionGauge = vvtPosition, "VVT position", "deg",     0,   100,     0,    0,    720,  720,   0,   0
   	OilPressGauge   	 = oilPressure,   "Oil Pressure",       "kPa",        0,    750,      35,     75,     550,   700,   0,   0	
   	idleAirValvePositionGauge = idleAirValvePosition, "Idle position", "%",     0,   100,     0,    0,    100,  100,   1,   1
   	fuelTankLevelGauge   = fuelTankLevel,"Fuel level",           "x",        0,      7,      10,     10,     100,   100,   1,   1
	knockGauge = knockLevel, "Knock Level", "db",        0,      -60,      10,     10,     100,   100,   1,   1

gaugeCategory = Sensors - Voltage
   	TpsVoltageGauge  = rawTps1Primary, "TPS 1 Primary Volts", "V", 0, 5, 0, 0, 5, 5, 3, 0
   	PedalVoltageGauge   = rawPpsPrimary , "Pedal Primary Volts", "V", 0, 5, 0, 0, 5, 5, 3, 0
   	CltVoltsGauge          = rawClt        , "CLT Volts",           "V", 0, 5, 0, 0, 5, 5, 3, 0
   	IatVoltsGauge          = rawIat        , "IAT Volts",           "V", 0, 5, 0, 0, 5, 5, 3, 0
   	OilPressVoltsGauge  = rawOilPressure, "Oil Pressure Volts",  "V", 0, 5, 0, 0, 5, 5, 3, 0
	MAFGauge			   = MAFValue,        "MAF Volts",         "V", 0, 5, 0, 0, 5, 5, 3, 0


gaugeCategory = Ignition
   	ignadvGauge = ignitionAdvance,       "Ignition timing",   "degrees",     -100,    100,    -999,   -999,     999,   999,   1, 1
   	dwellGauge        = sparkDwellValue,           "Dwell",      "mSec",        0,     10,     0.5,    1.0,     6.0,   8.0,   1, 1
   	coilDutyCycleGauge = coilDutyCycle,       @@GAUGE_NAME_DWELL_DUTY@@,      "perc",        -11,   11,     1.0,    1.2,      100,    100,   3, 1
   ignitionLoadGauge = ignitionLoad, @@GAUGE_NAME_IGNITION_LOAD@@, "%", 0, 300, 0, 0, 300, 300, 1, 1

gaugeCategory = Acceleration Enrichment
   	engineLoadDeltaGauge = engineLoadDelta,"AE: load change","value",      0,    120,      10,     10,     100,   100,   1,   1
   	engineLoadAccelExtraGauge = engineLoadAccelExtra,"AE: load extra","value",      0,    120,      10,     10,     100,   100,   1,   1
   	deltaTpsGauge     = deltaTps,                "AE: TPS change",            "",        0,    120,      10,     10,     100,   100,   1,   1
   	tpsAccelFuelGauge = tpsAccelFuel,"AE: TPS enrich",             "ms",        0,    120,      10,     10,     100,   100,   1,   1
   	wallFuelAmountGauge = wallFuelAmount, "AE: wall amount", "ms",     0,   100,     0,    0,    100,  100,   0,   0
   	wallFuelCorrectionGauge = wallFuelCorrection, "AE: wall correction extra", "ms",     0,   100,     0,    0,    100,  100,   0,   0

gaugeCategory = Fueling
   ;Name               Var            Title                 Units        Lo      Hi      LoD    LoW       HiW   HiD    vd  ld
   tChargeGauge          = tCharge,     @@GAUGE_NAME_FUEL_CHARGE_TEMP@@,        "deg C",      -40,    140,     -15,      1,      95,   110,   1,   1
   baroCorrectionGauge  = baroCorrection,@@GAUGE_NAME_FUEL_BARO_CORR@@,           "ratio",        0.5,    1.5,      0.6,     0.7,     1.3,   1.4,   1,   1
   crankingFuelGauge = crankingFuelMs,   @@GAUGE_NAME_FUEL_CRANKING@@,      "mSec",        0,   25.5,     1.0,    1.2,      20,    25,   3, 1
   iatCorrectionGauge = iatCorrection, @@GAUGE_NAME_FUEL_IAT_CORR@@, "mult",     0,   3,     0,    0,    3,  3,   2,   2
   cltCorrectionGauge = cltCorrection, @@GAUGE_NAME_FUEL_CLT_CORR@@, "mult",     0,   3,     0,    0,    3,  3,   2,   2
   injectorDutyCycleGauge=injectorDutyCycle, @@GAUGE_NAME_FUEL_INJ_DUTY@@,"%",      0,    120,      10,     10,     100,   100,   1,   1
   actualLastInjectionGauge   = actualLastInjection,     @@GAUGE_NAME_FUEL_LAST_INJECTION@@, "mSec",        0,   25.5,     1.0,    1.2,      20,    25,   3, 1
   veValueGauge      = veValue,                 "fuel: VE",            "",        0,    120,      10,     10,     100,   100,   1,   1
   
   injectorLagMsGauge = injectorLagMs,       @@GAUGE_NAME_INJECTOR_LAG@@,      "mSec",        0,   25.5,     1.0,    1.2,      20,    25,   3, 1
   fuelRunningGauge     = fuelRunning,       @@GAUGE_NAME_FUEL_RUNNING@@,      "mSec",        0,   25.5,     1.0,    1.2,      20,    25,   3, 1
   baseFuelGauge     = baseFuel,       @@GAUGE_NAME_FUEL_BASE@@,      "mSec",        0,   25.5,     1.0,    1.2,      20,    25,   3, 1
   fuelPidCorrectionGauge = fuelPidCorrection,       @@GAUGE_NAME_FUEL_PID_CORR@@,      "%",        -10,   10,     -8, -5, 5, 8,   3, 1
   fuelingLoadGauge = fuelingLoad, @@GAUGE_NAME_FUEL_LOAD@@, "%", 0, 300, 0, 0, 300, 300, 1, 1

gaugeCategory = Throttle Body (incl. ETB)
   	pedalPositionGauge = throttlePedalPosition, @@GAUGE_NAME_THROTTLE_PEDAL@@,        "%",    0,    120,      0,     0,     100,   100,   1,   1
   	tpsADCGauge       = tpsADC,           "tps1 ADC",       "ADC",        0,   1024,       0,      0,       0,     0,   0,   0
   	TPSGauge			 = TPSValue,      "Throttle position",         "%",        0,    100,       0,      0,     100,   100,   1,   1
   	TPS2Gauge		 = TPS2Value,     "Throttle position #2",         "%",        0,    100,       0,      0,     100,   100,   1,   1

   	etbTargetGauge     = etbTarget,     "ETB position target", "%",    0,    100,    0,     0,     100,   100,   1,   1
   	etbErrorGauge      = etb1Error,     "ETB position error",  "%",    -20,  20,    -10,   -5,    5,    10,  2, 0
   	etbDutyCycleGauge  = etb1DutyCycle, "ETB duty cycle",                 "%",    -100, 100,   -75,   -50,   50,   75,  0, 0
  	
gaugeCategory = WideBand
	afr1Gauge         = AFRValue, "Air fuel ratio",          "",       10,   19.4,      12,     13,      15,    16,   2,   1
	widebandIdentG = widebandIdent,     "CJ125 Ident",         "%",        0,    100,       0,      0,     100,   100,   1,   1
	;widebandStateGauge = cj125State,"Code",         "",        0,    120,      10,     10,     100,   1000,   1,   1
	;widebandDiagGauge = cj125Diag,"Code",         "",        0,    120,      10,     10,     100,   1000,   1,   1


[WueAnalyze]
    
;                    wueCurveName, afrTempCompensationCurve, lambdaTargetTableName, lambdaChannel, coolantTempChannel, egoCorrectionChannel, wueChannel, activeCondition
     wueAnalyzeMap = wueAnalyzer_warmup_curve, wueAfrTargetOffsetCurve, afrTableTbl, AFRValue, coolant, cltCorrection, egoCorrection

     lambdaTargetTables = afrTableTbl, afrTSCustom

     wuePercentOffset = 0 ; for working with 0 based enrichment set to 100
     option = disableLiveUpdates
     option = burnOnSend

;     filter = std_DeadLambda ; Auto build

     filter = decelFilterMap,"After Start Enrich", engine,         &     , 4 ,       , false
     filter = accelFilterTp, "TP Accel Enrich"   , engine,         &     , 16,       , false
     filter = decelFilterTp, "TP Decel Enrich"   , engine,         &     , 32,       , false
     filter = accelFilterMap,"MAP Accel Enrich"  , engine,         &     , 64,       , false
     filter = decelFilterMap,"MAP Decel Enrich"  , engine,         &     , 128,      , false
     ; this works, just another way to skin a cat
     ;filter = decelFilter, "Decel Flag" , tpsaccden,         >       , 0,        , false
     filter = overrunFilter, "Overrun"    , pulseWidth1,  =       , 0,            , false
     filter = highThrottle, "High Throttle"    , throttle,  >       , 15,         , true
     filter = lowRpm,       "Low RPM"    ,       rpm,       <       , 300,        , false
     filter = std_Custom ; Standard Custom Expression Filter.

   
[FrontPage]
   ; Gauges are numbered left to right, top to bottom.
   ;
   ;    1  2  3  4
   ;    5  6  7  8

   gauge1 = RPMGauge
   gauge2 = CLTGauge
   gauge3 = TPSGauge
   gauge4 = MAPGauge
   gauge5 = afr1Gauge
   gauge6 = VBattGauge
   gauge7 = dwellGauge
   gauge8 = ignadvGauge
   


;         =   expression,            off-label,            on-label,            off-bg, off-fg, on-bg, on-fg
	; important status
	indicator = { ind_hasFatalError }, "",   "Config Error",   green, black, red,   black
    indicator = { ind_isWarnNow }, "",   "Warning",   green, black, red,   black
    indicator = { ind_check_engine }, "Ok",      "Check Engine",       green,  black,  red, black
    indicator = { isIgnitionEnabledIndicator}, "no ignition",   "ignition",   yellow, black, white,   black
    indicator = { ind_injection_enabled}, "Injection Off",   "Injection Ok",   red, black, green,   black
    indicator = { ind_isTriggerError}, "Trigger Ok",      "Trigger Error",       green,  black,  red, black
    indicator = { lastErrorCode    }, "No Error Code", {bitStringValue(troubleList, lastErrorCode)},   green, black, red, black {ind_isWarnNow == 1}
    indicator = { recentErrorCode1 }, "No Error Code", {bitStringValue(troubleList, recentErrorCode1)},   green, black, red, black 
	indicator = { recentErrorCode2 }, "No Error Code", {bitStringValue(troubleList, recentErrorCode2)},   green, black, red, black 
    indicator = { recentErrorCode3 }, "No Error Code", {bitStringValue(troubleList, recentErrorCode3)},   green, black, red, black 
    indicator = { recentErrorCode4 }, "No Error Code", {bitStringValue(troubleList, recentErrorCode4)},   green, black, red, black 
    indicator = { recentErrorCode5 }, "No Error Code", {bitStringValue(troubleList, recentErrorCode5)},   green, black, red, black 
    indicator = { recentErrorCode6 }, "No Error Code", {bitStringValue(troubleList, recentErrorCode6)},   green, black, red, black 
    indicator = { recentErrorCode7 }, "No Error Code", {bitStringValue(troubleList, recentErrorCode7)},   green, black, red, black 
    ;indicator = { cj125State }, "", {bitStringValue(wideBandStateList, cj125State)},   green, black, red, black 
    ;indicator = { cj125Diag }, "", {bitStringValue(wideBandErrorList, cj125Diag)},   green, black, red, black 

	; minor info	
    indicator = { ind_fan}, "Fan Off",   "Fan On",   white, black, green,   black
    indicator = { isCylinderCleanupActivated}, "Cyl Cleanup Off",   "Cyl Cleanup On",   white, black, green,   black    
    indicator = { needBurn }, "Config Ok",  "Unsaved Changes",   white, black, yellow,   black
    indicator = { hasSdCard}, "No SD",   "with SD",   white, black, green,   black
    indicator = { ind_fuel_pump}, "Fuel Pump Off",   "Fuel Pump On",   white, black, green,   black
    indicator = { clutchUpState }, "Clutch Off",   "Clutch On",   white, black, red,   black
    indicator = { clutchDownState }, "Clutch",   "Clutch Down",   white, black, yellow,   black
    indicator = { brakePedalIndicator }, "Brake Off", "Brake On",   white, black, red,   black
    indicator = { acSwitchIndicator }, "AC on",   "AC off",   yellow, black, white,   black
    
    ; error codes
    indicator = { ind_tps_error}, "Tps Ok",   "Tps Error",   white, black, red,   black
    indicator = { ind_clt_error}, "Clt Ok",   "Clt Error",   white, black, red,   black
    indicator = { ind_iat_error}, "Iat Ok",   "Iat Error",   white, black, red,   black
;    indicator = { ind_map_error}, "Map Ok",   "Map Error",   white, black, red,   black
	indicator = { ind_pedal_error}, "map",   "map error",   white, black, red,   black

    indicator = { knockEverIndicator }, "",   "Knock Recently",   white, black, red,   black
    indicator = { knockNowIndicator }, "No Knock",   "Knock NOW",   white, black, red,   black
   
	

[Datalog]
   ;       Channel          Label          Type    Format
   entry = time,            @@GAUGE_NAME_TIME@@,        float,  "%.3f"
   entry = RPMValue,        @@GAUGE_NAME_RPM@@,         int,    "%d"
   entry = firmwareVersion, @@GAUGE_NAME_VERSION@@,     int,    "%d"
   entry = coolant,         @@GAUGE_NAME_CLT@@,         float,  "%.2f"
   entry = intake,          @@GAUGE_NAME_IAT@@,         float,  "%.2f"
   entry = oilPressure,		"Oil Press",   float,  "%.1f"
   entry = TPSValue,        @@GAUGE_NAME_TPS@@,         float,  "%.2f"
   entry = TPS2Value,       @@GAUGE_NAME_TPS2@@,        float, "%.2f"
   entry = MAFValue,        @@GAUGE_NAME_MAF@@,         float,  "%.2f"
   entry = MAPValue,        @@GAUGE_NAME_MAP@@,         float,  "%.1f"
   entry = AFRValue,        "AFR",         float,  "%.2f"
   entry = VBatt,           @@GAUGE_NAME_VBAT@@,       float,  "%.2f"
   entry = engineLoad,	    @@GAUGE_NAME_ENGINE_LOAD@@, 	   float,  "%.1f"
   entry = fuelingLoad,     @@GAUGE_NAME_FUEL_LOAD@@,     float, "%.1f"
   entry = ignitionLoad,    @@GAUGE_NAME_IGNITION_LOAD@@, float, "%.1f"
   entry = ignitionAdvance,	@@GAUGE_NAME_TIMING_ADVANCE@@,	   float,  "%.2f"
   entry = knockLevel,	    @@GAUGE_NAME_KNOCK_LEVEL@@, 	   float,  "%.2f"
   entry = knockCount,		@@GAUGE_NAME_KNOCK_COUNTER@@,	   int,    "%d"
   entry = vehicleSpeedKph,	@@GAUGE_NAME_VVS@@,	   float,  "%.2f"
   entry = speedToRpmRatio, "s2rpm",	   float,  "%.3f"
   entry = rpmAcceleration, "dRPM",        float,  "%.3f"
   entry = massAirFlowValue,@@GAUGE_NAME_AIR_FLOW@@,    float,  "%.3f"
   entry = chargeAirMass,   @@GAUGE_NAME_AIR_MASS@@,    float,  "%.3f"
   entry = throttlePedalPosition,   @@GAUGE_NAME_THROTTLE_PEDAL@@,       float,  "%.3f"
   entry = totalTriggerErrorCounter, @@GAUGE_NAME_TRG_ERR@@,int,    "%d"
   entry = idleAirValvePosition, @@GAUGE_NAME_IAC@@, float,  "%.3f"


   entry = injectorLagMs,   @@GAUGE_NAME_INJECTOR_LAG@@, float,  "%.3f"
   entry = fuelRunning,     @@GAUGE_NAME_FUEL_RUNNING@@, float,  "%.3f"
   entry = actualLastInjection,     @@GAUGE_NAME_FUEL_LAST_INJECTION@@, float,  "%.3f"
   entry = baseFuel,	    @@GAUGE_NAME_FUEL_BASE@@,  float,  "%.2f"
   entry = fuelPidCorrection,@@GAUGE_NAME_FUEL_PID_CORR@@,  float,  "%.2f"
   entry = veValue,         @@GAUGE_NAME_FUEL_VE@@,    float,  "%.3f"
   entry = injectorDutyCycle,@@GAUGE_NAME_FUEL_INJ_DUTY@@,float,"%.3f"
   entry = coilDutyCycle,	@@GAUGE_NAME_DWELL_DUTY@@,	float,"%.3f"
   entry = currentTargetAfr,@@GAUGE_NAME_TARGET_AFR@@,	float,"%.3f"

   	entry = injectorLagMs,   @@GAUGE_NAME_INJECTOR_LAG@@, float,  "%.3f"
   	entry = fuelRunning,     @@GAUGE_NAME_FUEL_RUNNING@@, float,  "%.3f"
   	entry = actualLastInjection,     @@GAUGE_NAME_FUEL_LAST_INJECTION@@, float,  "%.3f"
   	entry = baseFuel,	    @@GAUGE_NAME_FUEL_BASE@@,  float,  "%.2f"
   	entry = fuelPidCorrection,"EGO cor1",  float,  "%.2f"
   	entry = veValue,         @@GAUGE_NAME_FUEL_VE@@,    float,  "%.3f"
   	entry = injectorDutyCycle,@@GAUGE_NAME_FUEL_INJ_DUTY@@,float,"%.3f"
   	entry = coilDutyCycle,	@@GAUGE_NAME_DWELL_DUTY@@,	float,"%.3f"
   	entry = currentTargetAfr,@@GAUGE_NAME_TARGET_AFR@@,	float,"%.3f"

   entry = engineLoadAccelExtra, @@GAUGE_NAME_FUEL_EL_EXTRA@@,float,  "%.3f"
   entry = engineLoadDelta, "fuel: load change",float,  "%.3f"

   entry = deltaTps,		@@GAUGE_NAME_FUEL_TPS_ROC@@,float,  "%.3f"
   entry = tpsAccelFuel,    @@GAUGE_NAME_FUEL_TPS_EXTRA@@,    float,  "%.3f"

   entry = wallFuelCorrection,@@GAUGE_NAME_FUEL_WALL_CORRECTION@@,	float,   "%.3f"
   entry = wallFuelAmount, @@GAUGE_NAME_FUEL_WALL_AMOUNT@@,	float,   "%.3f"
   
   entry = baroCorrection,  @@GAUGE_NAME_FUEL_BARO_CORR@@,float,"%.3f"
   entry = iatCorrection,   @@GAUGE_NAME_FUEL_IAT_CORR@@,	float,   "%.3f"
   entry = cltCorrection,	@@GAUGE_NAME_FUEL_CLT_CORR@@, float,"%.3f"

   entry = sparkDwellValue,	@@GAUGE_COIL_DWELL_TIME@@, float,"%.3f"
   entry = vvtPosition, @@GAUGE_NAME_VVT@@, float,"%.2f"
   entry = injectionOffset, "injOffset"  , float, "%.2F"

; is there a way to log parameter?   entry = debugMode,   "debugMode",int,"%d"
   entry = debugFloatField1,   {bitStringValue( debugFieldF1List,  debugMode )},float,"%.4f", { !enableLogDebugChannels }
   entry = debugFloatField2,   {bitStringValue( debugFieldF2List,  debugMode )},float,"%.4f", { !enableLogDebugChannels }
   entry = debugFloatField3,   {bitStringValue( debugFieldF3List,  debugMode )},float,"%.4f", { !enableLogDebugChannels }
   entry = debugFloatField4,   {bitStringValue( debugFieldF4List,  debugMode )},float,"%.4f", { !enableLogDebugChannels }
   entry = debugFloatField5,   {bitStringValue( debugFieldF5List,  debugMode )},float,"%.4f", { !enableLogDebugChannels }
   entry = debugFloatField6,   {bitStringValue( debugFieldF6List,  debugMode )},float,"%.4f", { !enableLogDebugChannels }
   entry = debugFloatField7,   {bitStringValue( debugFieldF7List,  debugMode )},float,"%.4f", { !enableLogDebugChannels }
   entry = debugIntField1,     {bitStringValue( debugFieldI1List,  debugMode )},int,"%d", { !enableLogDebugChannels }
   entry = debugIntField2,     {bitStringValue( debugFieldI2List,  debugMode )},int,"%d", { !enableLogDebugChannels }
   entry = debugIntField3,     {bitStringValue( debugFieldI3List,  debugMode )},int,"%d", { !enableLogDebugChannels }
   entry = debugIntField4,     {bitStringValue( debugFieldI4List,  debugMode )},int,"%d", { !enableLogDebugChannels }
   entry = debugIntField5,     {bitStringValue( debugFieldI5List,  debugMode )},int,"%d", { !enableLogDebugChannels }


; Alternator_PID: D setting
   	entry = debugFloatField5,   @@GAUGE_NAME_DEBUG_F5@@,float,"%.4f", { !enableLogDebugChannels }

   entry = engineMode,   "Engine Mode",int,"%d"
   entry = warningCounter,   @@GAUGE_NAME_WARNING_COUNTER@@,int,"%d"
   entry = lastErrorCode,   @@GAUGE_NAME_WARNING_LAST@@,int,"%d"
   entry = recentErrorCode0,   "error 0",int,"%d", { !enableLogErrorList }
   entry = recentErrorCode1,   "error 1",int,"%d", { !enableLogErrorList }
   entry = recentErrorCode2,   "error 2",int,"%d", { !enableLogErrorList }
   entry = recentErrorCode3,   "error 3",int,"%d", { !enableLogErrorList }
   entry = recentErrorCode4,   "error 4",int,"%d", { !enableLogErrorList }
   entry = recentErrorCode5,   "error 5",int,"%d", { !enableLogErrorList }
   entry = recentErrorCode6,   "error 6",int,"%d", { !enableLogErrorList }
   entry = recentErrorCode7,   "error 7",int,"%d", { !enableLogErrorList }
   entry = internalMcuTemperature,   @@GAUGE_NAME_CPU_TEMP@@,float,"%.2f"
   
   entry = tCharge, "tCharge",float,"%.3f"
   
   entry = clutchUpState,   @@INDICATOR_NAME_CLUTCH_UP@@,int,"%d"
   entry = clutchDownState,   @@INDICATOR_NAME_CLUTCH_DOWN@@,int,"%d"
   entry = brakePedalIndicator,   @@INDICATOR_NAME_BRAKE_DOWN@@,int,"%d"
   entry = acSwitchIndicator,   @@INDICATOR_NAME_AC_SWITCH@@,int,"%d"
   entry = ind_fan, "radiator fan",int,"%d"

; Electronic throttle body
   entry = etb1Error,      "ETB Error", float, "%.3f"
   entry = etb1DutyCycle,  @@GAUGE_NAME_ETB_DUTY@@, float, "%.3f"
   entry = etbTarget,      "ETB Target", float, "%.3f"
   
   
;     tpsADC          = U16,    "ADC",
;     alignmet        = U16,    "al",
;     atmPres         = F32,    "pres",
;	  crankingFuel    = F32,    "ms",
;     tCharge         = F32,    "T",
;     sparkDwell      = F32,    "MAP",
;     warmUpEnrich    = F32,    "%",

[Menu]

menuDialog = main
	menu = "Configuration"
		subMenu = engineChars,					"Base Engine Settings"
		subMenu = std_separator
		subMenu = triggerConfiguration,			"Trigger Setup"
		subMenu = std_separator
		subMenu = updateFirmware,      			"Firmware Update"
			
		
	menu = "Fuel"
		subMenu = injectionSettings,	  		"Fuel Main"
		subMenu = std_separator
		subMenu = allPins2_1,            		"Injector Outputs"
		subMenu = fuelClosedLoopDialog, 	"Closed loop fuel correction", 0, {enableInjectors == 1}
		subMenu = std_separator
		subMenu = testInjectors,          		"Injector Test"
		subMenu = std_separator
		groupMenu = 					"Injector Settings"
		groupChildMenu = injectorDeadTime,		"Injector Dead Time", 0, {enableInjectors == 1}
		groupChildMenu = injPhaseTableTbl,     	"Injection Phase", 0, {enableInjectors == 1}
	
	;	subMenu = fuelClosedLoopDialog, 	"Closed Loop", 0, {enableInjectors == 1}
		subMenu = std_separator
        groupMenu = 					"AfterStart Enrichment"
		groupChildMenu = afterstartEnrichCurve,		"AfterStart Enrichment", 0, {enableInjectors == 1}
        groupChildMenu = afterstartHoldTimeCurve,	"AfterStart Hold Time", 0, {enableInjectors == 1}
        groupChildMenu = afterstartDecayCurve,		"AfterStart Decay Time", 0, {enableInjectors == 1}
		subMenu = std_separator	
		groupMenu = 					"Warmup Enrichment"
		groupChildMenu = cltFuelCorrCurve,			"Warmup Enrichment", 0, {enableInjectors == 1}
		groupChildMenu = iatFuelCorrCurve,			"Intake Air Temp Enrichment", 0, {enableInjectors == 1}
		
		
		subMenu = std_separator	
		# Accel enrichment
	
		groupMenu = 					"Accel Enrichments"
		groupChildMenu = EngineLoadAccelPanel,      "Engine Load Based", 0, {enableInjectors == 1}
		groupChildMenu = TpsAccelPanel,             "TPS Based", 0, {enableInjectors == 1}
        subMenu = std_separator
        subMenu = tChargeSettings,					"Charge Temp Correction", 0, {enableInjectors == 1}
		subMenu = std_separator
        subMenu = coastingFuelCutControl, 			"Overrun Fuel Cut", 0, {enableInjectors == 1}
        subMenu = std_separator
	    subMenu = WallWettingAccelPanel, 			"Wall Wetting", 0, {enableInjectors == 1}
	    subMenu = std_separator
		subMenu = afrTableTbl,						"Target AFR Table", 0, {enableInjectors == 1}
		subMenu = std_separator
		subMenu = veTableTbl,						"Main Fuel Table ", 0, {enableInjectors == 1}
		
	

	menu = "Ignition"
		subMenu = ignitionSettings,					"Ignition Main"
        subMenu = std_separator
		subMenu = allPins2_2,              			"Ignition Outputs"
		subMenu = std_separator
		subMenu = testSpark,               			"Test Ignition Outputs"
		subMenu = std_separator
	    subMenu = multisparkSettings,				"Multispark", 0, {enableIgnition == 1}
		subMenu = std_separator
		groupMenu = 	"Corrections"
		groupChildMenu = ignitionIatCorrTableTbl,	"IAT Correction", 0, {enableIgnition == 1}
		subMenu = std_separator
		subMenu = dwellSettings,					"Coil Dwell Time", 0, {enableIgnition == 1}
		subMenu = ignitionTableTbl,					"Main Ignition Table ", 0, {enableIgnition == 1}
	


	menu = "&Cranking/Idle"
        subMenu = crankingIgnition, 				"Cranking Ignition Settings"
		subMenu = std_separator	
	    subMenu = crankingFuel,       				"Cranking Fuel Settings"
		subMenu = std_separator
		subMenu = crankingAirSettings,               	"Cranking Air Settings"
		subMenu = std_separator
		# Corrections
	    groupMenu = 		"Cranking Enrichment"
	    groupChildMenu = crankingDurationCurve,	   	"First Crank Enrichment"
		groupChildMenu = crankingCltCurve,			"Cranking Enrichment Table"
		subMenu = crankingAdvanceCurve,				"Cranking Ignition Table", 0, {enableCrankingTimingTable == 1}
		# Idle
		subMenu = std_separator	
		subMenu = idlehw,							"Idle hardware"
		subMenu = std_separator						
		subMenu = etbIdleSettingsDialog,           	"Idle Settings", {useETBforIdleControl == 1}
		subMenu = std_separator
		subMenu = idleSettingsDialog,				"Idle Settings", {useSolenoidIdle == 1}
		subMenu = std_separator	
		subMenu = cltIdleRPMCurve,					"Idle Target RPM"
		subMenu = cltIdleCurve,						"Idle Valve Warmup Correction"
		subMenu = idleVeCurve,               		"Idle VE Table", 0, {useSeparateVeForIdle == 1}
		subMenu = idleAdvanceCurve,					"Idle Ignition Table", 0, {useSeparateAdvanceForIdle == 1}
		subMenu = idleTimingPidCorrDialog,			"Closed-loop Idle Timing", {useIdleTimingPidControl == 1}		
		subMenu = iacCoastingCurve,					"Coasting IAC Position for Auto-Idle", 0, {useIacTableForCoasting == 1}
     	
	  
		

		
	
	menu = "&Inputs"
		subMenu = DigitalInputs,		    		"Digital Inputs"
		subMenu = std_separator
		

		# TPS/Pedal
		subMenu = tpsSensor,						"TPS"
		subMenu = pedalSensor,				"Accelerator pedal"
		subMenu = std_separator
		subMenu = cltSensor,						"Coolant Temp Sensor"
		subMenu = iatSensor,						"Intake Air Temp Sensor"
		
		subMenu = std_separator

		
		subMenu = mapSensor,						"MAP Sensor"
		subMenu = baroSettings,						"Baro Sensor"
        subMenu = oilPressureSensor,				"Oil pressure"
	    subMenu = std_separator
		
	;	subMenu = mafSettings,						"MAF Sensor"
	;	subMenu = mafDecodingCurve,					"MAF Linearization", 0, {mafAdcChannel != 16}
	;	subMenu = std_separator
		subMenu = auxTempSensor1Sensor,  			"GP Temp Sensor 1"
		subMenu = auxTempSensor2Sensor,				"GP Temp Sensor 2"
		# O2 sensor(s)
		subMenu = std_separator
		subMenu = egoSettings,						"EGO Sensor"
		subMenu = knockSettings,					"Knock Sensor"
	
		subMenu = narrowToWideOxygenCurve,			"Narrow to Wideband approximation"
	  
		
	menu = "&Outputs" 
		subMenu = boostDialog,          			"Boost Control"
		subMenu = boostPidDialog,        			"Closed Loop Boost",    { boostType == 1 }
		subMenu = std_separator
	   	subMenu = gppwm1, "General Purpose PWM 1"
		subMenu = gppwm2, "General Purpose PWM 2"
		subMenu = gppwm3, "General Purpose PWM 3"
		subMenu = gppwm4, "General Purpose PWM 4"
		subMenu = std_separator
		;subMenu = vvtDialog,						"VVT Settings"
	    ;subMenu = std_separator
        subMenu = fuelPump,						"Fuel Pump"
		subMenu = mainRelay,					"Main Relay"
		subMenu = fanSetting,					"Fan"
		subMenu = tachSettings,					"Tachometer"
        subMenu = alternator,              		"Alternator Control"
	# Digital outputs
	subMenu = std_separator
		


    menu = "&E-Throttle"
        subMenu = etbDialog,					"Electronic Throttle Setup" 
		subMenu = std_separator
		subMenu = pedalToTpsTbl,				"Throttle Target Map"
		subMenu = std_separator
		subMenu = tpsSensor,						"TPS"
		subMenu = pedalSensor,						"Accelerator Pedal"
	
	
	menu = "&MotorSport/Advanced" 
		subMenu = smLaunchControl,					"Launch Control"
	 	subMenu = std_separator
		;subMenu = antiLag,        					"Antilag Setup"
		;subMenu = std_separator	
		


	menu = "Tools"
        subMenu = batteryDialog, 				"Battery Calibration"
		subMenu = canBus,                   	"CAN-Bus Settings"
		subMenu = analogInputSettings, 			"Analog Input Settings"
		subMenu = frpmTableBins, 				"Edit Fuel Rpm Axis"
		subMenu = floadTableBins, 				"Edit Fuel Load Axis"
    	subMenu = IrpmTableBins, 				"Edit Ign RPM Axis"
        subMenu = IloadTableBins, 				"Edit Ign Load Axis"
  	

	menu = "&Internal Settings"
        subMenu = std_separator 
		subMenu = allPins1,  "Full Pinout 1"
		subMenu = allPins2 , "Full Pinout 2"
		subMenu = debug, "Debug Mode"
		subMenu = connection, "Connection"
		subMenu = ecuStimulator, "Trigger Simulator"

       
     menu = "Help"
        ;subMenu = helpGeneral,     "Wiring Information"
		subMenu = helpUpdate,     "Firmware Update"
		subMenu = helpDbw,     "E-Throttle Setup"
		subMenu = helpPid,   "PID Tuning"
		subMenu = helpBoost, , "Boost Control Setup"	
		subMenu = helpLaunch, , "Launch Control Setup"
		subMenu = helpAls, , "AntiLag Setup"

[ControllerCommands]
; commandName    = command1, command2, commandn...
; command in standard ini format, a command name can be assigned to 1 to n commands that will be executed in order.
;         This does not include any resultant protocol envelope data, only the response data itself.

; WARNING!! These commands bypass TunerStudio's normal memory synchronization. If these commands
; alter mapped settings (Constant) memory in the controller, TunerStudio will have an out of sync condition 
; and may create error messages.
; It is expected that these commands would not typically alter any ram mapped to a Constant.

;
; see TS_IO_TEST_COMMAND in firmware code
;

cmd_erase_fault_codes 	= "w\x00\x11\x00\x01"
cmd_test_spk1  			= "w\x00\x12\x00\x01"
cmd_test_spk2  			= "w\x00\x12\x00\x02"
cmd_test_spk3  			= "w\x00\x12\x00\x03"
cmd_test_spk4  			= "w\x00\x12\x00\x04"
cmd_test_spk5  			= "w\x00\x12\x00\x05"
cmd_test_spk6  			= "w\x00\x12\x00\x06"
cmd_test_spk7  			= "w\x00\x12\x00\x07"
cmd_test_spk8  			= "w\x00\x12\x00\x08"
cmd_test_spk9  			= "w\x00\x12\x00\x09"
cmd_test_spk10 			= "w\x00\x12\x00\x0a"
cmd_test_spk11 			= "w\x00\x12\x00\x0b"
cmd_test_spk12 			= "w\x00\x12\x00\x0c"
cmd_test_spk13 			= "w\x00\x12\x00\x0d"
cmd_test_spk14 			= "w\x00\x12\x00\x0e"
cmd_test_spk15 			= "w\x00\x12\x00\x0f"
cmd_test_spk16 			= "w\x00\x12\x00\x10"
		
		
cmd_test_inj1  			= "w\x00\x13\x00\x01"
cmd_test_inj2  			= "w\x00\x13\x00\x02"
cmd_test_inj3  			= "w\x00\x13\x00\x03"
cmd_test_inj4  			= "w\x00\x13\x00\x04"
cmd_test_inj5  			= "w\x00\x13\x00\x05"
cmd_test_inj6  			= "w\x00\x13\x00\x06"
cmd_test_inj7  			= "w\x00\x13\x00\x07"
cmd_test_inj8  			= "w\x00\x13\x00\x08"
cmd_test_inj9  			= "w\x00\x13\x00\x09"
cmd_test_inj10 			= "w\x00\x13\x00\x0a"
cmd_test_inj11 			= "w\x00\x13\x00\x0b"
cmd_test_inj12 			= "w\x00\x13\x00\x0c"
cmd_test_inj13 			= "w\x00\x13\x00\x0d"
cmd_test_inj14 			= "w\x00\x13\x00\x0e"
cmd_test_inj15 			= "w\x00\x13\x00\x0f"
cmd_test_inj16 			= "w\x00\x13\x00\x10"

		
cmd_test_fuel_pump   		= "w\x00\x14\x00\x01"
cmd_calibrate_tps_1_closed  = "w\x00\x14\x00\x02"
cmd_calibrate_tps_1_wot	    = "w\x00\x14\x00\x03"
cmd_calibrate_tps_2_closed  = "w\x00\x14\x00\x04"
cmd_calibrate_tps_2_wot     = "w\x00\x14\x00\x05"
cmd_calibrate_pedal_up      = "w\x00\x14\x00\x06"
cmd_calibrate_pedal_down    = "w\x00\x14\x00\x07"
cmd_tle8888_init     		= "w\x00\x14\x00\x08"
cmd_test_ac_relay     		= "w\x00\x14\x00\x09"
cmd_write_config     		= "w\x00\x14\x00\x0A"
cmd_test_starter_relay     	 = "w\x00\x14\x00\x0B"
cmd_etb_autotune             = "w\x00\x14\x00\x0C"
cmd_enable_self_stim         = "w\x00\x14\x00\x0D"
cmb_etb_auto_calibrate       = "w\x00\x14\x00\x0E"
cmd_disable_self_stim        = "w\x00\x14\x00\x0F"
cmd_etb_autotune_stop        = "w\x00\x14\x00\x10"

cmd_test_radiator_fan        = "w\x00\x15\x00\x01"
cmd_test_check_engine_light  = "w\x00\x16\x00\x01"
cmd_test_idle_valve          = "w\x00\x17\x00\x01"
cmd_cj125_calibrate          = "w\x00\x18\x00\x00"
cmd_cj125_reset          	 = "w\x00\x19\x00\x00"
cmd_test_main_relay            = "w\x00\x20\x00\x00"
cmd_stop_engine              = "w\x00\x79\x00\x00"

; reboot ECU
cmd_reset_controller        = "w\x00\xbb\x00\x00"
; jump to DFU mode
cmd_dfu         			= "w\x00\xba\x00\x00"


[UserDefined]
   ; Key setting dialogs are defined here. 
   ; In most cases TunerStudio will choose the appropriate UI widget based on
   ; the Constant type. However, there are additional use specific widgets such
   ; Slider - Can be assigned and scalar Constant to render a slider UI widget
   ; gauge - Place a gauge of choosing on a dialog.
   ; liveGraph - Place a live graph widget with multiple traces.
   ; commandButton - A button that when clicked will send a generic command as defined in [ControllerCommands]

   ; Supported Layouts Consist of Border, xAxis, Card, yAxis (Default)

   ;----------------------------------------------------------------------------
   ; Create custom dialogs here.
   ; 1. Define a new dialog by giving it a name and display text.
   ; 2. Define items on the dialog, such as fields or gauges.  There are many
   ;    options for display type and configuration, so refer to the 
   ;    documentation.
   ;----------------------------------------------------------------------------	
;[UserDefined]
dialog = limits, "Limits"
		field = "RPM Hard Limit",         	    		rpmLimit
		field = "Cranking RPM limit",                	cranking_rpm


	dialog = baseEngineConfig, "Engine Configuration"
;		field = "Engine Preset",						engineType
		field = "Number of Cylinders",					cylindersCount
		field = "Engine Displacement",         			displacement
		field = "Firing Order",							firingOrder
		field = "Speed Density are normally used"
		field = "Fuel Equation Mode",					fuelAlgorithm
		field = ""		


	dialog = internalSettings, "Internal Settings"
        field = "Key Combinations For Internal Settings"
		field = "Full Pinout 1:			fp1" 
		field = "Full Pinout 2:			fp2"
		field = "Debug:					dbg"
		field = "Connection:			con"
		field = "Trigger Simulator:		sim"

;			Engine->Base Engine Settings
	dialog = engineChars, "Base Engine Settings"
		panel = baseEngineConfig
		panel = limits
		panel = internalSettings

	dialog = triggerConfig,	""
		field = "Trigger type",							trigger_type
		field = "Trigger Angle Offset",         		globalTriggerAngleOffset
		field = ""
		;field = "Trigger Filter",						triggerFilter
		field = "#Custom Trigger Settings"
		field = ""
		field = "Trigger 1 Speed",						ambiguousOperationMode
		field = ""              
		field = "Trigger 1 Sensor Type",				useOnlyRisingEdgeForTrigger
		field = ""
		field = "total Tooth Count",					trigger_numTeeth, {trigger_type == 0}
		field = "skipped Tooth Count",					trigger_missingTeeth, {trigger_type == 0}  
		field = ""
 		field = "Enable noise filtering",				enableTriggerFilter
		field = "Enable Custom Sync Ratio",				syncMode
		field = "Min (3x)",								syncRatioFrom
		field = "Max (3x)",								syncRatioTo
		

dialog = triggerInputs,					"Trigger Inputs"
		field = "Trigger 1 are the signal processed first by the ECU"
		field = "Normally Crank are Trigger 1 unless some rare cases"
		field = ""
		field = "Trigger 1", 							pinTrigger1
		field = "Trigger Polarity",						trigger1Edge
		field = ""
		field = "Mode",						tle8888mode
		field = "Detection Voltage",			tle8888VrDetectionVoltage, {tle8888mode != 0}
		field = "Filter Time",						tle8888VrFilter, {tle8888mode != 0}
		field = "Peak Detection Time",						tle8888VrPeakTime, {tle8888mode != 0}
		
		field = ""
		field = "Trigger 2", 							pinTrigger2,            { trigger_type != 0 && trigger_type != 8 && trigger_type != 9 && trigger_type != 18 && trigger_type != 20}
		field = "Trigger Polarity",						trigger2Edge, { trigger_type != 0 && trigger_type != 8 && trigger_type != 9 && trigger_type != 18 && trigger_type != 20}
		field = ""
		field = "VVT Input",		  					pinCam1
		field = "Invert VVT Signal",				invertCamVVTSignal
		field = ""
		field = "Active Edge",						vvtCamSensorUseRise, {trigger_type != 80}
	    field = "Trigger Wheel", 					vvtMode, { isVvtControlEnabled && vvt_vvtType == 1 }

	dialog = triggerConfiguration, "Trigger Setup",	border
        panel =  triggerConfig, West
		panel = triggerInputs, East
	
			#Fuel Settings

	dialog = injectionSettings, ""
		field = "Enabled",						enableInjectors
		field = "Injector Flow",				injector_size
		field = "Mode",							injectionMode
		field = "Offset Angle",					extraInjectionOffset


				
	dialog = testInjectors, "Injector Test"
	    field = ""
		field = "For Checking Outputs"
		field = ""
		field = "These Buttons Will Generate Some Test Pulses"
		field = ""
		commandButton = "Injector 1", cmd_test_inj1
		commandButton = "Injector 2", cmd_test_inj2
		commandButton = "Injector 3", cmd_test_inj3
		commandButton = "Injector 4", cmd_test_inj4
		commandButton = "Injector 5", cmd_test_inj5
		commandButton = "Injector 6", cmd_test_inj6
		commandButton = "Injector 7", cmd_test_inj7
		commandButton = "Injector 8", cmd_test_inj8
    

	dialog = injectorDeadTime,	"", yAxis
		panel = injectorsDeadTime,		East



	dialog = tChargeRpmTpsSettings, "RPM+TPS Mode Settings"
		displayOnlyField = ""
	    field = "Estimation of Charge Temperature are estimated by interpolation between these points"
		displayOnlyField = ""
		displayOnlyField = "A value of 100% means the Charge Temperature parameter will read the same as the ECT parameter"
		displayOnlyField = "A value of 0% means the Charge Temperature parameter will read the same as the IAT parameter"
		displayOnlyField = ""
		displayOnlyField = "When using the Charge Temp Correction, start with IAT Fuel Correction and Warmup Enrichment set to 0" 
		displayOnlyField = ""
		
		field = "Min RPM - Min TPS", tChargeMinRpmMinTps
		field = "Min RPM - Max TPS", tChargeMinRpmMaxTps
		field = ""
		field = "Max RPM - Min TPS", tChargeMaxRpmMinTps
		field = "Max RPM - Max TPS", tChargeMaxRpmMaxTps

	dialog = tChargeGeneralSettings, ""
		field = "Charge Temp Estimate Mode", tChargeMode
		field = "Change Remp Increment Limit, deg/sec", tChargeAirIncrLimit
		field = "Change Temp Decrement Limit, deg/sec", tChargeAirDecrLimit
	    field = ""

	dialog = tChargeAirInterpSettings, "Air Interpolation Mode Settings"
		field = "Min tCharge Coeff.", tChargeAirCoefMin
		field = "Max tCharge Coeff.", tChargeAirCoefMax
		field = "Max Air Flow, kg/h", tChargeAirFlowMax
		
	dialog = tChargeSettings, "Charge Temperature Estimate Settings "
		panel = tChargeGeneralSettings
		panel = tChargeRpmTpsSettings, { tChargeMode == 0}
		panel = tChargeAirInterpSettings, { tChargeMode == 1}

		
		dialog = coastingFuelCutControl, "Overrun Fuel Cut Settings"
		field = "Overrun Fuel Cut",						enableDfco
		field = "RPM High Limit",						rpmMaxDfco, {enableDfco == 1}
		field = "RPM Low Limit",						rpmMinDfco, 	{enableDfco == 1}
		field = "TP/AP Threshold",						tpsTresholdDfco, 	{enableDfco == 1}
		field = "CLT Threshold",						cltTresholdDfco, 	{enableDfco == 1}
		field = "MAP Threshold",      					mapTresholdDfco, 	{enableDfco == 1}
	
	dialog = EngineLoadAccelPanelLeft, "Accel Enrichment"
		field = ""
		field = "Accel Hold controls how long the full acceleration enrichment"
		field = "will last before it begins its decay to zero."
		field = "The number represents the number of injection events which must"
		field = "occur before the decay begins."
		field = ""
		field = "Enrichment Hold Time",					engineLoadAccelLength
		field = "Enrichment Threshold (Kpa)", 			loadBasedAeMaxEnrich
		field = "Enrichment",	 						loadBasedAeMult
		field = ""
		field = "This function controls the rate at which the Acceleration Enrichment fuel"
		field = "decays away to zero. The number represents a percentage of the original"
		field = "Acceleration Enrichment."
		field = ""
		field = "Decay Threshold", 				loadBasedAeMaxEnleanment
		field = "Decay Enleanment",	 			engineLoadDecelEnleanmentMultiplier

		dialog = accelTaperPanel, "", card 
 		panel = mapAccelTaper
		
	dialog = EngineLoadAccelPanel, "", border
        panel = EngineLoadAccelPanelLeft, West
        panel = accelTaperPanel, Center

	
		
	dialog = WallWettingAccelPanel, "Wall Wetting"
		field = "evaporation time constant",          wwaeTau
		field = "added to wall coef",                   wwaeBeta

	dialog = TpsAccelPanelLeft, "TPS"
		field = "Enable",						enableTpsTpsAe
   		field = "Length",						tpsAccelLength
		field = "Accel Threshold", 				maxDeltaTpsEnlean
		field = "Decay Threshold", 				maxDeltaTpsEnlean
		field = "Decay Enleanment",	 			tpsTpsEnleanFactor
		field = ""
		field = "#Throttle Pump model:"
		field = "Enable",						enableThrottlePumps
		field = "Fraction Period",				tpsAccelFractionCycles
		field = "Fraction Divisor",				tpsAccelFractionDivisor
		field = "Accel Enrichment Time Treshold",		noAccelAfterHardLimitPeriodSecs
;			Tuning->AccelEnrichment
	dialog = tpsTpsPanel, "", card 
 		panel = tpsTpsAccelTbl

	dialog = TpsAccelPanel, "", border	
        panel = TpsAccelPanelLeft, West
        panel = tpsTpsPanel, Center
				
	

				
	
#Ignition
	
        

	dialog = ignitionSettings, ""
		field = "Enabled",						enableIgnition
		field = "Mode",							ignitionMode, {enableIgnition == 1}
		field = "Spark Edge",         	        sparkEdge, {enableIgnition == 1}
		field = "#Wasted spark with individual coils"
		field = "Two wire wasted",				twoWireBatchIgnition, {enableIgnition == 1 && ignitionMode == 2}
		field = "Timing Mode",					timingMode, {enableIgnition == 1}
		field = "#Use fixed timing while validating with a timing gun"
		field = "Fixed Timing",					fixTiming, {enableIgnition == 1 && timingMode == 1}
	    

	dialog = ignitionCylExtra, "Ignition Cylinder Extra Timing"
		field = "Extra cyl #1",                       		timing_offset_cylinder1
		field = "Extra cyl #2",                       		timing_offset_cylinder2, {cylindersCount > 1}
		field = "Extra cyl #3",                       		timing_offset_cylinder3, {cylindersCount > 2}
		field = "Extra cyl #4",                       		timing_offset_cylinder4, {cylindersCount > 3}
		field = "Extra cyl #5",                       		timing_offset_cylinder5, {cylindersCount > 4}
		field = "Extra cyl #6",                       		timing_offset_cylinder6, {cylindersCount > 5}
		field = "Extra cyl #7",                       		timing_offset_cylinder7, {cylindersCount > 6}
		field = "Extra cyl #8",                       		timing_offset_cylinder8, {cylindersCount > 7}
		field = "Extra cyl #9",                       		timing_offset_cylinder9, {cylindersCount > 8}
		field = "Extra cyl #10",                       		timing_offset_cylinder10, {cylindersCount > 9}
		field = "Extra cyl #11",                       		timing_offset_cylinder11, {cylindersCount > 10} 
		field = "Extra cyl #12",                       		timing_offset_cylinder12, {cylindersCount > 11}
	
	dialog = multisparkDwellParams, "Delay & Dwell"
		field = "Spark Duration",							multisparkSparkDuration, {multisparkEnable}
		field = "Dwell",									multisparkDwell, {multisparkEnable}

	dialog = multisparkMain, "Configuration"
		field = "Maximum engine speed",						multisparkMaxRpm, {multisparkEnable}
		field = "Fire sparks for this angle duration"		multisparkMaxSparkingAngle, {multisparkEnable}
		field = "Maximum extra spark count"					multisparkMaxExtraSparkCount, {multisparkEnable}

	dialog = multisparkSettings, "Multispark"
		field = "#WARNING! These settings have the potential to overheat ignition components"
		field = "#and cause other nasty misbehavior.  Use with care, at your own risk!"
		field = "Enable Multiple Sparks",					multisparkEnable
		panel = multisparkMain
		panel = multisparkDwellParams

	dialog = dwellSettings, "", yAxis
		panel = dwellCorrection,	Center
		dialog = testSpark, "Ignition Coil Test"
		field = ""
		field = "For Checking Outputs"
		field = ""
		field = "These Buttons Will Generate Some Test Pulses"
		field = ""
		commandButton = "Spark #1", cmd_test_spk1
		commandButton = "Spark #2", cmd_test_spk2
		commandButton = "Spark #3", cmd_test_spk3
		commandButton = "Spark #4", cmd_test_spk4
		commandButton = "Spark #5", cmd_test_spk5
		commandButton = "Spark #6", cmd_test_spk6
		commandButton = "Spark #7", cmd_test_spk7
		commandButton = "Spark #8", cmd_test_spk8




dialog = crankingIgnition, "Ignition"
		field = "Use separate Advance Table for cranking",		enableCrankingTimingTable
		field = "Advance", 										fixedCrankingTiming, {enableCrankingTimingTable == 0}	
		field = "Use Advance Corrections for cranking",			useAdvanceCorrectionsForCranking
        field = "Use fixed cranking dwell",         			enableFixedDwellCranking
        field = "Fixed Cranking Dwell",           				ignitionDwellForCrankingMs, {enableFixedDwellCranking == 1}
		field = "Cranking Dwell Angle", 						crankingChargeAngle, {enableFixedDwellCranking == 0}

dialog = crankingFuel, "Fuel"
		field = "Cranking Injection Mode",						crankingInjectionMode
		field = "Fuel Map Are Normally Used"
		field = "Fuel Source For Cranking",             		useRunningMathForCranking
		field = "Base Fuel Pulse Width", 						cranking_baseFuel, {useRunningMathForCranking == 0}
		field = "Priming Duration at -40C degrees",				startOfCrankingPrimingPulse
		field = "Priming Falloff temperature", 					primeInjFalloffTemperature
		field = "Enable Cylinder Cleanup",						isCylinderCleanupEnabled
		field = ""
		field = "Enable Fast Start(Without Trigger Sync)",		isFasterEngineSpinUpEnabled

	dialog = crankingAir, "Air"		
		field = "Override Throttle multiplier for cranking",	overrideCrankingIacSetting
#			Engine->idle Settings	

		
	dialog = idleSolenoid, "Solenoid"
		field = "Idle Solenoid Output",					idle_solenoidPin, {useSolenoidIdle == 1}
		field = "Idle Solenoid Output Mode",   	  	    idle_solenoidPinMode, {useSolenoidIdle == 1}
		field = "Second Idle Solenoid Output",			secondSolenoidPin, {useSolenoidIdle == 1}
		field = "Solenoid Frequency",   				idle_solenoidFrequency, {useSolenoidIdle == 1}

	

	dialog = idleStepper, "Stepper"
		field = "Drive stepper with dual H bridges",	useHbridges, {useStepperIdle == 1}
		field = "Stepper reaction time",				idleStepperReactionTime, {useStepperIdle == 1}
		field = "Stepper total steps",					idleStepperTotalSteps, {useStepperIdle == 1}
		field = "Stepper parking extra steps, %",		stepperParkingExtraSteps, {useStepperIdle == 1}
		field = "Force parking every restart",			stepperForceParkingEveryRestart, {useStepperIdle == 1}
		

	dialog = idleHwType, "Idle Valve Outputs",	border
		panel = idleSolenoid,				West, {useSolenoidIdle == 1}
		panel = idleStepper,				East, {useStepperIdle == 1}
		

	dialog = idlehw, ""
		field = "E-Throttle for Idle Control",				useETBforIdleControl, {useSolenoidIdle == 0}
		field = ""
		field = "Solenoid Valve",                           useSolenoidIdle, {useETBforIdleControl == 0}
		field = "Dual Solenoid Mode",						isDoubleSolenoidIdle, {useETBforIdleControl == 0 && useSolenoidIdle == 1}
		field = ""
	;	field = "Stepper Valve",							useStepperIdle, {useETBforIdleControl == 0}
	;	panel = idleHwType, {useSolenoidIdle == 1 || useStepperIdle == 1}
	
	


	dialog = crankingAirSettings,""
		slider = "Cranking Air Valve Position",					crankingIACposition
 		field = "For E-Throttle, This Means % Of Max Idle Opening"
		field = ""
		field = "Afterstart Hold Duration In Cranking Position"
		field = "Afterstart Hold",					afterCrankingIACtaperDuration
 	
	
	dialog = idleSettings,""		
		field = "Control Mode",									idleMode
		slider = "Manual Idle Position",						manIdlePosition, horizontal, {idleMode == 1}
     	field = ""
		field = "Idle Solenoid Output",							idle_solenoidPin, {useETBforIdleControl == 0}
		field = "Idle Solenoid Output Mode",   	  	    		idle_solenoidPinMode, {useETBforIdleControl == 0}
		field = "Idle Solenoid Frequency",   					idle_solenoidFrequency, {useETBforIdleControl == 0}
		field = "Idle Ignition"
		field = "Separate Ignition Table",	               		useSeparateAdvanceForIdle
		field = "Instant Rpm Method",	useInstantRpmForIdle
	    field = "PID Settings"
		field = "Enable Pid-Cic",	useCicPidForIdle
	    field = "idleIncrementalPidCic",						idleIncrementalPidCic
		field = "Disable Above TPS",							idlePidDeactivationTpsThreshold, {idleMode == 0}
		field = "AntiWindup Frequency",							idle_antiwindupFreq
		field = "Derivative FilterLoss",						idle_derivativeFilterLoss
		

	dialog = etbIdleSettings,""
		field = "Maximum Allowed TPS For Idle Control To Operate"
		field = "Idle Control Range",							etbIdleThrottleRange
		field = "Control Mode",									idleMode
		slider = "Idle Position (% TPS Of Maximum Allowed Idle Range)",	manIdlePosition, horizontal, {idleMode == 1}
    	field = ""
		field = "Idle Ignition"
		field = "Separate Ignition Table For Idle",	        	useSeparateAdvanceForIdle, {idleMode == 0}
		field = ""
		field = "PID Settings"	
				field = "Instant Rpm Method",	useInstantRpmForIdle
		field = "Disable Above Pedal Position",					idlePidDeactivationTpsThreshold, {idleMode == 0}


	dialog = idlePidSettings, "Idle PID Control"	
		field = ""
		field = "P-Gain                        	%/100 Rpm",idleRpmPid_pFactor
		field = "I-Gain                   	%/100 Rpm/Sec",idleRpmPid_iFactor
		field = "D-Gain                   	%/100 Rpm/Sec",idleRpmPid_dFactor
		field = "Update Rate",	idleRpmPid_periodMs
		field = "Min",									    idleRpmPid_minValue
		field = "Max",										idleRpmPid_maxValue
		field = "I-Term Min",								idlerpmpid_iTermMin
		field = "I-Term Max",								idlerpmpid_iTermMax
		field = "Offset",										idleRpmPid_offset
		field = ""
		field = "PID Are Disabled Within This Range From Target-Rpm"
		field = "Rpm DeadBand",								idlePidRpmDeadZone
		field = ""
		field = "Rpm Above Target-Rpm To Disable Idle Control"
		field = "Rpm",	 									idlePidRpmUpperLimit
		field = ""
		field = "Additional PID Gain At Low Rpm",			pidExtraForLowRpm
		
		
	dialog = idleSettingsDialog, "", xAxis
	    panel = idleSettings
        panel = idlePidSettings, { idleMode == 0}
		
	
	dialog = etbIdleSettingsDialog, "", xAxis
	    panel = etbIdleSettings
        panel = idlePidSettings, { idleMode == 0}


	dialog = idleTimingPidCorrDialog, "", xAxis
		field = "!This timing correction mode is Alpha Version"
		field = "Use Auto-PID ignition advance control",	useIdleTimingPidControl
		field = "#See Idle Target RPM Curve"
		field = "P-factor",									idleTimingPid_pFactor, {useIdleTimingPidControl == 1}
		field = "I-factor",									idleTimingPid_iFactor, {useIdleTimingPidControl == 1}
		field = "D-factor",									idleTimingPid_dFactor, {useIdleTimingPidControl == 1}
		field = "Offset",									idleTimingPid_offset, {useIdleTimingPidControl == 1}
		field = "Min Delta",								idleTimingPid_minValue, {useIdleTimingPidControl == 1}
		field = "Max Delta",								idleTimingPid_maxValue, {useIdleTimingPidControl == 1}
		field = "period",									idleTimingPid_periodMs, {useIdleTimingPidControl == 1}
		field = "#See RPM dead zone to deactivate IAC pid"
		field = "RPM working zone for timing pid",			idleTimingPidWorkZone, {useIdleTimingPidControl == 1}
		field = "RPM working zone falloff",					idlePidFalloffDeltaRpm, {useIdleTimingPidControl == 1}
		field = "RPM dead zone to deactivate timing pid",	idleTimingPidDeadZone, {useIdleTimingPidControl == 1}

#			Cranking->Cranking Settings
	
	dialog = postCrankingEnrichment, "Post-cranking short-time fuel enrichment (NOT IMPLEMENTED #331)"
		field = "Post-Cranking factor", 				postCrankingFactor
		field = "Duration", 							postCrankingDurationSec
		
#			Sensors->AUX2 Thermistor Sensor Setting		

	dialog = auxTempSensor1Sensor,	"aux1 Thermistor Settings"
		field = "Input",								auxTempSensor1_adcChannel
		field = "Bias Resistor",       					auxTempSensor1_bias_resistor, {auxTempSensor1_adcChannel != 16}
		field = "#Here is three pairs of thermistor temperature and resistance."
		field = "#Typical Temperatures is -40 deg C, 0 deg C and 100 deg C"
		field = ""
		field = "Lowest Temperature",					auxTempSensor1_tempC_1, {auxTempSensor1_adcChannel != 16}
		field = "Resistance @ LT",						auxTempSensor1_resistance_1, {auxTempSensor1_adcChannel != 16}
		field = ""
		field = "Middle Temperature",					auxTempSensor1_tempC_2, {auxTempSensor1_adcChannel != 16}
		field = "Resistance @ MT",						auxTempSensor1_resistance_2, {auxTempSensor1_adcChannel != 16}
		field = ""
		field = "Highest Temperature",					auxTempSensor1_tempC_3, {auxTempSensor1_adcChannel != 16}
		field = "Resistance @ HT",						auxTempSensor1_resistance_3, {auxTempSensor1_adcChannel != 16}

;			Sensors->AUX2 Thermistor Sensor Setting
	dialog = auxTempSensor2Sensor, "aux2 Thermistor Settings"
		field = "Input",								auxTempSensor2_adcChannel
		field = "Bias Resistor",						auxTempSensor2_bias_resistor, {auxTempSensor2_adcChannel != 16}
    	field = "#Here is three pairs of thermistor temperature and resistance."
		field = "#Typical temperatures is -40 deg C, 0 deg C and 100 deg C"
		field = ""
		field = "Lowest temperature",					auxTempSensor2_tempC_1, {auxTempSensor2_adcChannel != 16}
		field = "Resistance @ LT",						auxTempSensor2_resistance_1, {auxTempSensor2_adcChannel != 16}
		field = ""
		field = "Middle Temperature",					auxTempSensor2_tempC_2, {auxTempSensor2_adcChannel != 16}
		field = "Resistance @ MT",						auxTempSensor2_resistance_2, {auxTempSensor2_adcChannel != 16}
		field = ""
		field = "Highest Temperature",					auxTempSensor2_tempC_3, {auxTempSensor2_adcChannel != 16}
		field = "Resistance @ HT",						auxTempSensor2_resistance_3, {auxTempSensor2_adcChannel != 16}
	
	dialog = tpsNum1, "Throttle #1"
		field = "!See Tools>Calibrate TPS"
		field = "Primary sensor",				tps1_1AdcChannel
		field = "Primary min",					tpsMin, {tps1_1AdcChannel != @@ADC_CHANNEL_NONE@@}
		field = "Primary max",					tpsMax, {tps1_1AdcChannel != @@ADC_CHANNEL_NONE@@}
		field = "Secondary sensor",				tps1_2AdcChannel
		field = "Secondary min",				tps1SecondaryMin, {tps1_2AdcChannel != @@ADC_CHANNEL_NONE@@}
		field = "Secondary max",				tps1SecondaryMax, {tps1_2AdcChannel != @@ADC_CHANNEL_NONE@@}

	dialog = tpsNum2, "Throttle #2"
		field = "Primary sensor",				tps2_1AdcChannel
		field = "Primary min",					tps2Min, {tps2_1AdcChannel != @@ADC_CHANNEL_NONE@@}
		field = "Primary max",					tps2Max, {tps2_1AdcChannel != @@ADC_CHANNEL_NONE@@}
		field = "Secondary sensor",				tps2_2AdcChannel
		field = "Secondary min",				tps2SecondaryMin, {tps2_2AdcChannel != @@ADC_CHANNEL_NONE@@}
		field = "Secondary max",				tps2SecondaryMax, {tps2_2AdcChannel != @@ADC_CHANNEL_NONE@@}

	dialog = tpsLimits, "TPS Limits"
		field = "TPS minimum valid value",	tpsErrorDetectionTooLow, {tps1_1AdcChannel != @@ADC_CHANNEL_NONE@@}
		field = "TPS maximum valid value",	tpsErrorDetectionTooHigh, {tps1_1AdcChannel != @@ADC_CHANNEL_NONE@@}

	dialog = tpsSensor, "TPS"
		panel = tpsLimits
		panel = tpsNum1
		panel = tpsNum2

	dialog = pedalSensorLeft, "Accelerator pedal"
		field = "Accelerator position sensor",			throttlePedalPositionAdcChannel
		field = "Up voltage",							throttlePedalUpVoltage
		field = "Down (WOT) voltage",					throttlePedalWOTVoltage
		field = "Accelerator position 2nd sensor",		throttlePedalPositionSecondAdcChannel
		field = "Up voltage"							throttlePedalSecondaryUpVoltage
		field = "Down (WOT) voltage",					throttlePedalSecondaryWOTVoltage

	dialog = pedalGauges
		gauge = pedalPositionGauge
		gauge = PedalVoltageGauge

	dialog = pedalSensor, "Accelerator pedal", border
		panel = pedalSensorLeft, West
		panel = pedalGauges, East
	dialog = DigitalInputs,					"Digital Inputs"
		field = "Clutch Down Input",					clutchDownPin
		field = "Input Mode",							clutchDownPinMode
		field = "Clutch Up Input",						clutchUpPin
		field = "Input Mode",                          	clutchUpPinMode
		field = ""
		field = "Brake Pedal Input",					brakePedalPin
		field = ""
		field = "A/C Switch",							acSwitchAdc
		field = ""
		field = "Speed Sensor Input",					vehicleSpeedSensorInputPin
		field = "Speed Sensor Multiplier",				vehicleSpeedCoef
		field = "Enable Can Speed Sensor", 				enableCanVss
	    field = "Vss Car Type",						    canVssNbcType, { enableCanVss  }

#			Sensors->CLT sensor
 	dialog = cltSensor, "Calibrate Coolant Sensor"
      	field = "Coolant Sensor Input", 				clt_adcChannel
	  	field = "Bias Resistor",						clt_bias_resistor, {clt_adcChannel != 16}
      	settingSelector = "Common Coolant Sensors"
      	settingOption = "Bosch NTC",  clt_tempC_1=-40, clt_resistance_1=45340,clt_tempC_2=30, clt_resistance_2=1707,clt_tempC_3=120, clt_resistance_3=113
      	settingOption = "Delphi M12",  clt_tempC_1=-40, clt_resistance_1=100865,clt_tempC_2=30, clt_resistance_2=2240,clt_tempC_3=120, clt_resistance_3=101
	  	settingOption = "DTM 1/8npt",  clt_tempC_1=-40, clt_resistance_1=45340,clt_tempC_2=30, clt_resistance_2=2501,clt_tempC_3=120, clt_resistance_3=113
	  	field = ""
	  	field = "Temperature ",  clt_tempC_1
      	field = "Resistance ", clt_resistance_1
	  	field = ""
	  	field = "Temperature ", clt_tempC_2
      	field = "Resistance ", clt_resistance_2
	  	field = ""
	  	field = "Temperature ", clt_tempC_3
      	field = "Resistance ", clt_resistance_3
      	field = "Linear characteristic",			useLinearCltSensor, {clt_adcChannel != 16}

#			Sensors->IAT sensor
		
	dialog = iatSensor, "Calibrate Intake Air Temp Sensor"
      	field = "IAT Sensor Input", 				iat_adcChannel
	  	field = "Bias Resistor",					iat_bias_resistor, {iat_adcChannel != 16}
      	settingSelector = "Common IAT Sensors"
      	settingOption = "Bosch NTC",  iat_tempC_1=-40, iat_resistance_1=45340,iat_tempC_2=30, iat_resistance_2=1707,iat_tempC_3=120, iat_resistance_3=113
      	settingOption = "Delphi M12",  iat_tempC_1=-40, iat_resistance_1=100865,iat_tempC_2=30, iat_resistance_2=2240,iat_tempC_3=120, iat_resistance_3=101
	  	settingOption = "DTM 1/8npt",  iat_tempC_1=-40, iat_resistance_1=45340,iat_tempC_2=30, iat_resistance_2=2501,iat_tempC_3=120, iat_resistance_3=113
	  	field = ""
	  	field = "Temperature ",  iat_tempC_1
      	field = "Resistance ", iat_resistance_1
	  	field = ""
	  	field = "Temperature ", iat_tempC_2
      	field = "Resistance ", iat_resistance_2
	  	field = ""
	  	field = "Temperature ", iat_tempC_3
      	field = "Resistance ", iat_resistance_3
      	field = "Linear characteristic",			useLinearIatSensor, {iat_adcChannel != 16}

; 				Sensors->Oil pressure sensor
	dialog = oilp_settings, "Oil pressure sensor"
		field = "Oil Pressure ADC input",			oilPressure_hwChannel
		field = "low voltage",						oilPressure_v1, {oilPressure_hwChannel != 16}
		field = "low pressure",						oilPressure_value1, {oilPressure_hwChannel != 16}
		field = "high voltage",						oilPressure_v2, {oilPressure_hwChannel != 16}
		field = "high pressure",					oilPressure_value2, {oilPressure_hwChannel != 16}

    dialog = oilPressureSensor, "", xAxis
		panel = oilp_settings
		gauge = OilPressGauge
	
#			Sensors->MAP sensor
	dialog = baroSettings, "Baro sensor"
			field = "Baro Sensor Input", 				baroSensor_hwChannel
	    settingSelector = "Common Baro Sensors"
        settingOption = "MPX4115",  baroSensor_lowValue=10,   baroSensor_highValue=118 ; https://www.nxp.com/docs/en/data-sheet/MPX4115.pdf
    	settingOption = "MPX4250",  baroSensor_lowValue=10,   baroSensor_highValue=260 ; https://www.nxp.com/docs/en/data-sheet/MPX4250A.pdf Vout = VCC x (P x 0.004  0.04)
        settingOption = "GM 1-BAR", baroSensor_lowValue=10,   baroSensor_highValue=105 ; https://speeduino.com/wiki/index.php/File:GM_Table.gif
        settingOption = "GM 2-BAR", baroSensor_lowValue=9,  baroSensor_highValue=208 ; https://speeduino.com/wiki/index.php/File:GM_Table.gif
        settingOption = "GM 3-BAR", baroSensor_lowValue=1,  baroSensor_highValue=315 ; VOUT = VS*(.00318*P-.00353)
        settingOption = "MPXH6300", baroSensor_lowValue=1,  baroSensor_highValue=315 ; https://www.nxp.com/docs/en/data-sheet/MPXH6300A.pdf VOUT = VS*(.00318*P-.00353)
        settingOption = "MPX5700", baroSensor_lowValue=-31,  baroSensor_highValue=746 ; https://www.nxp.com/docs/en/data-sheet/MPX5700.pdf Vout = VS*(0.0012858*P+0.04)
        settingOption = "MPX6400", baroSensor_lowValue=3,  baroSensor_highValue=416 ; https://www.nxp.com/docs/en/data-sheet/MPXH6400A.pdf VOUT = VS x (0.002421xP0.00842)
        settingOption = "Denso 079800", baroSensor_lowValue=0,  baroSensor_highValue=173 ; http://speeduino.com/forum/viewtopic.php?f=18&t=510&p=7023#p7021
        settingOption = "VW/Audi/Porsche 250kPa", baroSensor_lowValue=26,  baroSensor_highValue=250 ; http://speeduino.com/forum/viewtopic.php?p=17502#p17502
        settingOption = "Bosch 3 Bar TMAP", baroSensor_lowValue=-6,  baroSensor_highValue=323
        field =    "kPa At 0.0 Volts",   			baroSensor_lowValue
        field =    "kPa At 5.0 Volts",   			baroSensor_highValue
		
	

	

	dialog = mafSettings, "MAF Sensor", yAxis
		field = "Input", 							mafAdcChannel
	
	 
	dialog = mapSensor, "Calibrate MAP/Baro"
      	field = "#MAP Sensor"
      	field = "MAP Sensor Input", 				map_sensor_hwChannel
	    settingSelector = "Common Map Sensors"
        settingOption = "MPX4115",  map_sensor_lowValue=10,   map_sensor_highValue=118 ; https://www.nxp.com/docs/en/data-sheet/MPX4115.pdf
    	settingOption = "MPX4250",  map_sensor_lowValue=10,   map_sensor_highValue=260 ; https://www.nxp.com/docs/en/data-sheet/MPX4250A.pdf Vout = VCC x (P x 0.004  0.04)
        settingOption = "GM 1-BAR", map_sensor_lowValue=10,   map_sensor_highValue=105 ; https://speeduino.com/wiki/index.php/File:GM_Table.gif
        settingOption = "GM 2-BAR", map_sensor_lowValue=9,  map_sensor_highValue=208 ; https://speeduino.com/wiki/index.php/File:GM_Table.gif
        settingOption = "GM 3-BAR", map_sensor_lowValue=1,  map_sensor_highValue=315 ; VOUT = VS*(.00318*P-.00353)
        settingOption = "VW 4-BAR", baroSensor_lowValue=2,  baroSensor_highValue=418
	    settingOption = "MPXH6300", map_sensor_lowValue=1,  map_sensor_highValue=315 ; https://www.nxp.com/docs/en/data-sheet/MPXH6300A.pdf VOUT = VS*(.00318*P-.00353)
        settingOption = "MPX5700", map_sensor_lowValue=-31,  map_sensor_highValue=746 ; https://www.nxp.com/docs/en/data-sheet/MPX5700.pdf Vout = VS*(0.0012858*P+0.04)
        settingOption = "MPX6400", map_sensor_lowValue=3,  map_sensor_highValue=416 ; https://www.nxp.com/docs/en/data-sheet/MPXH6400A.pdf VOUT = VS x (0.002421xP0.00842)
        settingOption = "Denso 079800", map_sensor_lowValue=0,  map_sensor_highValue=173 ; http://speeduino.com/forum/viewtopic.php?f=18&t=510&p=7023#p7021
        settingOption = "VW/Audi/Porsche 250kPa", map_sensor_lowValue=26,  map_sensor_highValue=250 ; http://speeduino.com/forum/viewtopic.php?p=17502#p17502
        settingOption = "Bosch 3 Bar TMAP", map_sensor_lowValue=-6,  map_sensor_highValue=323
        field =    "kPa At 0.0 Volts",   			map_sensor_lowValue
        field =    "kPa At 5.0 Volts",   			map_sensor_highValue

#			Sensors->EGO sensor
	dialog = egoSettings_sensor,	"EGO sensor"
        field =    "AFR Min Volts",   			afr_v1, {afr_type != 7}
		field =    "AFR Min Value",   			afr_value1, {afr_type != 7}
		field = ""
		field =    "AFR Max Volts",   			afr_v2, {afr_type != 7}
		field =    "AFR Max Value",   			afr_value2, {afr_type != 7}
; todo: only use these values for custom!		
		field = "Correction",							egoValueShift, {afr_type != 7}

	dialog = egoSettings_IO,	"EGO Sensor I/O"
		field = "Input channel", 						afr_hwChannel, {afr_type != 7}
		
	dialog = cj125, ""
	    field = "Internal Wideband Sensor"
		field = "Enabled",							isCJ125Enabled, {afr_type == 7}
		field = "Sensor Type",						cj125isLsu49, {isCJ125Enabled == 1 && afr_type == 7}
		
		field = "Dynamic Mode Change (Test)",		cj125AutoChangeMode, {isCJ125Enabled == 1 && afr_type == 7}
		field = "Custom PID Gains",					tuneCj125Pid, {isCJ125Enabled == 1 && afr_type == 7}
		field = "P Gain",							cj125Pfactor, {isCJ125Enabled == 1 && afr_type == 7 && tuneCj125Pid == 1}
		field = "I Gain",							cj125Ifactor, {isCJ125Enabled == 1 && afr_type == 7 && tuneCj125Pid == 1}
		commandButton = "Start Calibration", 		cmd_cj125_calibrate, {isCJ125Enabled == 1 && afr_type == 7}
		commandButton = "Reset", 		cmd_cj125_reset, {isCJ125Enabled == 1 && afr_type == 7}


	dialog = egoSettings, "", yAxis
		field = "Type",									afr_type
		panel = egoSettings_IO
		panel = egoSettings_sensor,	{afr_hwChannel != 16 && enableAemXSeries == 0 && !auxSerialRxPin && !auxSerialTxPin}
		panel = cj125
		field = "Enable AEM X-Series CANbus",			enableAemXSeries, { canReadEnabled }
		field = "Enable Innovate LC-2 Serial",			enableInnovateLC2, { auxSerialRxPin && auxSerialTxPin }

	      
	dialog = knockSettings, "Knock Sensor"
		field = "Enable", 								enableSoftwareKnock
		field = "Middle Frequency", 					knockBandCustom
#Outputs		

	dialog = fuelPump, "Fuel Pump"
		field = "Output",							pinFuelPump
		field = "Output Mode",         	        	pinFuelPumpMode
		field = "Prime duration",					startUpFuelPumpDuration
		field = "Test Fuel Pump"
		commandButton = "Test Fuel Pump", 				cmd_test_fuel_pump

	dialog = mainRelay, "Main relay output"
		field = "Output",  							pinMainRelay
		field = "Output Mode",			         	pinMainRelayMode
		commandButton = "Test Main Relay", 			cmd_test_main_relay

   
	


     dialog = fanSetting, "Fan Settings"
		field = "Output",							pinFan
		field = "Output Mode",						pinFanMode
		field = "On temperature",					fanOnTemperature
		field = "Off temperature",					fanOffTemperature
		field = "Use This Button To Test Fan Output"
		commandButton = "Fan Test", 				cmd_test_radiator_fan

	dialog = vvt_left, ""
		field = "Enable",							isVvtControlEnabled
		field = "Output",							vvt_vvtControlPin
		field = "Number of Teeth"
		field = "Minimum Coolant Temp",             vvt_minVvtTemperature
		field = "Maximum Advance/Retard",           vvt_maxVvtDeviation
		field = "Load Axis",                        vvt_vvtLoadAxis
		field = "Mode",								vvt_vvtType
	    field = "Active Edge",						vvtCamSensorUseRise, {trigger_type != 80}
	    field = "Trigger Wheel", 					vvtMode, { isVvtControlEnabled && vvt_vvtType == 1 }
	  	field = "Angle Window to look for edge"
	   	field = "Min Angle",		            	vvtToothMinAngle, { isVvtControlEnabled && vvt_vvtType == 1 }
	    field = "Max Angle",		            	vvtToothMaxAngle, { isVvtControlEnabled && vvt_vvtType == 1 }
		field = "Tooth Offset",		            	vvtOffset, { isVvtControlEnabled && vvt_vvtType == 1 }
	   
		field = "Frequency",						vvt_vvtPwmFrequency, { isVvtControlEnabled }
		field = "Min Duty",							vvt_vvtPid_minValue, { isVvtControlEnabled }
		field = "Max Duty",							vvt_vvtPid_maxValue, { isVvtControlEnabled }
		field = "#PID Settings"
		field = "Control Interval",					vvt_vvtPid_periodMs, { isVvtControlEnabled && vvt_vvtType == 1 }
		field = "P Gain",							vvt_vvtPid_pFactor, { isVvtControlEnabled && vvt_vvtType == 1 }
		field = "I Gain",							vvt_vvtPid_iFactor, { isVvtControlEnabled && vvt_vvtType == 1 }
		field = "D Gain",							vvt_vvtPid_dFactor,{ isVvtControlEnabled && vvt_vvtType == 1 }
		

	dialog = vvtDialog, "", border
        panel = vvt_left, West
        panel = vvtTableTbl, Center	

;Boost Open Loop

	dialog = boost_left, ""
        field = "Enable",                           isBoostControlEnabled
        field = "Control Mode",                     boostType, { isBoostControlEnabled }
		field = "Output",							boostControlPin, { isBoostControlEnabled }
		field = "Output Mode",                      boostControlPinMode, { isBoostControlEnabled }
		field = "Frequency",						boostPwmFrequency, { isBoostControlEnabled } 
		field = ""
		field = "Boost Cut Pressure",				boostCutPressure
		
	dialog = boostDialog, "", border
        panel = boost_left, West
        panel = boostTableTbl, Center

;Boost Closed Loop

	dialog = boostPidleft, ""
   		field = "P Gain", 	                        boostPid_pFactor, { isBoostControlEnabled && boostType == 1 }				
	   	field = "I Gain",                           boostPid_iFactor, { isBoostControlEnabled && boostType == 1 }			
	   	field = "D Gain",                           boostPid_dFactor, { isBoostControlEnabled && boostType == 1 }			
		;boostPid_offset					
		field = "Control Period",                   boostPid_periodMs, { isBoostControlEnabled && boostType == 1 }			
		field = "Min Duty",                         boostPid_minValue, { isBoostControlEnabled && boostType == 1 }			
		field = "Max Duty",                         boostPid_maxValue, { isBoostControlEnabled && boostType == 1 }	

 	dialog = boostTableDialog, "", card
    	panel = boostTable2Tbl

	dialog = boostPidDialog, "", border
        panel = boostPidleft, West
        panel = boostTableDialog, Center		

	
			;			Racing Features->Launch Control
	dialog = smLaunchControl, "Launch Control Settings"
        field = "Enable Launch Control",               	launchControlEnabled
		field = "Activation Mode",                      launch_launchActivationMode,  {launchControlEnabled == 1}
	    field = "Switch Input",                     	launchActivatePin,  {launch_launchActivationMode == 0 && launchControlEnabled == 1}
		field = "Clutch Input", 						clutchDownPin,      {launch_launchActivationMode == 1 && launchControlEnabled == 1}
		field = "Input Mode",							clutchDownPinMode,  {launch_launchActivationMode == 1 && launchControlEnabled == 1}
		field = "Invert Switch",						invertLaunchSwitch,  {launchControlEnabled == 1}
		displayOnlyField  = "RPM Settings"
		field = "Launch RPM",            	    		launch_launchRpm,  {launchControlEnabled == 1}
		field = "Enable Launch Retard",             	enableLaunchRetard, {launchControlEnabled == 1 }
		field = "Ignition Retard RPM Range",            launch_launchAdvanceRpmRange,  {launchControlEnabled == 1 }
		field = "Hard Cut RPM Range",                   launch_hardCutRpmRange,  {launchControlEnabled == 1}
		displayOnlyField  = "Enable Conditions"
		field = "Enable Activation Delay",				useLaunchActivateDelay,  {launchControlEnabled == 1}
		field = "Activation Delay",                     launch_launchActivateDelay, {launchControlEnabled == 1 && useLaunchActivateDelay ==1}
		field = "Disable By Speed",	                    launchDisableBySpeed, {launchControlEnabled == 1}
		field = "Speed Treshold",                       launch_launchSpeedTreshold,  {launchControlEnabled == 1 && launchDisableBySpeed == 1}
	    field = "Disable Below TPS", 	                launch_launchTpsTreshold, {launchControlEnabled == 1}
	    displayOnlyField  = "Launch Settings"
		field = "Enable Launch Fuel", 					enableLaunchFuel,  {launchControlEnabled == 1}
		field = "Extra Fuel",           				launch_launchFuelAdded,  {launchControlEnabled == 1 && enableLaunchFuel == 1}
        field = "Enable Launch Boost",               	enableLaunchBoost, {launchControlEnabled == 1}
        field = "Boost Solenoid Duty",	                launch_launchBoostDuty,  {launchControlEnabled == 1 && enableLaunchBoost == 1}
		field = "Ignition Retard",      				launch_launchTimingRetard,  {launchControlEnabled == 1 }
		field = "Smooth Retard Mode",                   launchSmoothRetard,  {launchControlEnabled == 1}
		displayOnlyField  = "Hard Cut Mode"
		field = "Ignition Cut",    						enableLaunchIgnCut,  {launchControlEnabled == 1}
		field = "Fuel Cut",	    						enableLaunchFuelCut,  {launchControlEnabled == 1}
		
	

					;			Racing Features->Rolling Launch
	dialog = antiLag, "AntiLag Settings"
        field = "Conditions"
		field = "Enable AntiLag",               		antiLagEnabled
	    field = "Activation Mode",          			antiLag_antiLagActivationMode,  {antiLagEnabled == 1}    
		field = "Switch Input",                 		antiLagActivatePin,  {antiLag_antiLagActivationMode == 1 && antiLagEnabled == 1}
		field = "Antilag Timeout",            			antiLag_antilagTimeout, {antiLagEnabled == 1}
		field = "Tps Treshold",    						antiLag_antiLagTpsTreshold,  {antiLagEnabled == 1}
		field = "Rpm Treshold",                         antiLag_antiLagRpmTreshold,  {antiLagEnabled == 1}
		field = "Coolant Treshold", 					antiLag_antiLagCoolantTreshold,  {antiLagEnabled == 1}
		field = ""
		field = "Settings"
		
		field = "Enable Extra Air",  					enableAntiLagAir,  {antiLagEnabled == 1}
		field = "Air Supply Source",                    antiLag_antiLagAirSupply,  {antiLagEnabled == 1 && enableAntiLagAir == 1}
		field = "Extra Air %",							antiLag_antilagExtraAir,  {antiLagEnabled == 1 && enableAntiLagAir == 1}
		field = "Enable Ignition Retard",				enableAntiLagRetard,  {antiLagEnabled == 1}
		field = "Ignition Retard", 						antiLag_antiLagRetard,  {antiLagEnabled == 1 && enableAntiLagRetard == 1}	
		field = "Enable Extra Fuel",					enableAntiLagFuel,  {antiLagEnabled == 1&& enableAntiLagRetard == 1}
		field = "Extra Fuel %",							antiLag_antiLagExtraFuel,  {antiLagEnabled == 1 && enableAntiLagFuel == 1&& enableAntiLagRetard == 1}
		field = "Enable Boost Valve",					enableAntiLagBoost,  {antiLagEnabled == 1}
		field = "Boost Solenoid Duty"					antiLag_antiLagBoost,  {antiLagEnabled == 1 && enableAntiLagBoost == 1}


	dialog = coastingFuelCutControl, "Coasting Fuel Cutoff Settings"
		field = "Enable Coasting Fuel Cutoff",			enableDfco
		field = "Cutoff Activation RPM High Limit",		rpmMaxDfco, {enableDfco == 1}
		field = "Cutoff Deactivation RPM Low Limit",	rpmMinDfco, {enableDfco == 1}
		field = "TPS Deactivation Threshold",			tpsTresholdDfco, {enableDfco == 1}
		field = "CLT Activation Threshold",				cltTresholdDfco, {enableDfco == 1}
		field = "MAP Deactivation Threshold",      		mapTresholdDfco, {enableDfco == 1}


# Electronic Throttle

	dialog = etbAutotune, "PID Autotune"
		commandButton = "Start ETB PID Autotune", cmd_etb_autotune
		commandButton = "Stop ETB PID Autotune", cmd_etb_autotune_stop
		commandButton = "Auto Calibrate TPS", cmb_etb_auto_calibrate

		dialog = etbPidDialog, "PID Settings"
	 	displayOnlyField  = "#Set FeedForward map before tuning PID"
		field = "P Gain",								etb_pFactor, {throttlePedalPositionAdcChannel != 16}
		field = "I Gain",								etb_iFactor, {throttlePedalPositionAdcChannel != 16}
		field = "D Gain",								etb_dFactor, {throttlePedalPositionAdcChannel != 16}
		field = "I-Term Min",							etb_iTermMin, {throttlePedalPositionAdcChannel != 16}
		field = "I-Term Max",							etb_iTermMax, {throttlePedalPositionAdcChannel != 16}
		field = "Control Update Period",				etb_periodMs, {throttlePedalPositionAdcChannel != 16}
		
	dialog = etbDialogText
		field = ""
		displayOnlyField = "Feed-Forward Table"

	dialog = etbDialogLeft
	 	field = ""
		field = "Frequency",							etbFreq, {throttlePedalPositionAdcChannel != 16}
		field = ""
		panel = etbAutotune
		panel = etbPidDialog
		panel = etbDialogText


	dialog = etbDialogRight
		field = "ETB Idle Control",						useETBforIdleControl
		field = "Maximum Idle Opening",					etbIdleThrottleRange, {useETBforIdleControl == 1}
		field = "Cranking/TPS Angle % / Max",			crankingIACposition
		slider = "Idle Position % / Max",				manIdlePosition, horizontal, {useETBforIdleControl == 1}
		field = ""
		field = "Idle Mode",							idleMode
		

	dialog = etbDialogBottom
		field = ""  
        panel = etbTpsBiasCurve
	

	dialog = etbDialog, "Electronic Throttle", border
		panel = etbDialogLeft, West
		panel = etbDialogRight, East
		panel = etbDialogBottom, South

	

	dialog = debug, "Debug"
    	field = "Debug Mode",							debugMode



	dialog = stftPartitioning, "Region Configuration"
		field = "Idle region RPM",						stft_maxIdleRegionRpm
		field = "Overrun region load",					stft_maxOverrunLoad
		field = "Power region load",					stft_minPowerLoad

	dialog = stftPartitionSettingsMain, "Main Region", xAxis
		field = "Time Const",							stft_cellCfgs4_timeConstant
		field = "Max add",								stft_cellCfgs4_maxAdd
		field = "Max remove",							stft_cellCfgs4_maxRemove

	dialog = stftPartitionSettingsIdle, "Idle Region", xAxis
		field = "Time Const",							stft_cellCfgs1_timeConstant
		field = "Max add",								stft_cellCfgs1_maxAdd
		field = "Max remove",							stft_cellCfgs1_maxRemove

	dialog = stftPartitionSettingsPower, "Power Region", xAxis
		field = "Time Const",							stft_cellCfgs3_timeConstant
		field = "Max add",								stft_cellCfgs3_maxAdd
		field = "Max remove",							stft_cellCfgs3_maxRemove

	dialog = stftPartitionSettingsOverrun, "Overrun Region", xAxis
		field = "Time Const",							stft_cellCfgs2_timeConstant
		field = "Max add",								stft_cellCfgs2_maxAdd
		field = "Max remove",							stft_cellCfgs2_maxRemove

	dialog = fuelClosedLoopDialog, "Short-term fuel trim"
		field = "Enabled",								fuelClosedLoopCorrectionEnabled

		field = "Startup delay"							stft_startupDelay, {fuelClosedLoopCorrectionEnabled == 1}
		field = "Minimum CLT for correction",			stft_minClt, {fuelClosedLoopCorrectionEnabled == 1}
		field = "Minimum AFR for correction",			stft_minAfr, {fuelClosedLoopCorrectionEnabled == 1}
		field = "Maximum AFR for correction",			stft_maxAfr, {fuelClosedLoopCorrectionEnabled == 1}
		field = "Adjustment deadband",					stft_deadband, {fuelClosedLoopCorrectionEnabled == 1}
		field = "Ignore error magnitude",				stftIgnoreErrorMagnitude, {fuelClosedLoopCorrectionEnabled == 1}

		panel = stftPartitioning, {fuelClosedLoopCorrectionEnabled == 1}
		panel = stftPartitionSettingsMain, {fuelClosedLoopCorrectionEnabled == 1}
		panel = stftPartitionSettingsIdle, {fuelClosedLoopCorrectionEnabled == 1}
		panel = stftPartitionSettingsPower, {fuelClosedLoopCorrectionEnabled == 1}
		panel = stftPartitionSettingsOverrun, {fuelClosedLoopCorrectionEnabled == 1}

		
	dialog = enterDfu, ""
		field = "Enter DFU Mode"
    	commandButton = "Update Firmware",              cmd_dfu 
    	commandButton = "Reset Controller",             cmd_reset_controller	
  		commandButton = "Erase Fault Codes",         	cmd_erase_fault_codes
		commandButton = "Calibrate Wideband", 			cmd_cj125_calibrate
	
	dialog = updateFirmware, ""
		panel = enterDfu
	
;			Board->ECU stimulator
	dialog = ecuStimulator, "Trigger Simulator"
		field = "Engine Speed",   						triggerSimulatorFrequency
		field = "Trigger Simulation"
		field = ""
		commandButton = "Start", cmd_enable_self_stim
		commandButton = "Stop", cmd_disable_self_stim
		

	
	

		;			Engine->Other inputs	
	dialog = analogInputSettings, "Analog Input Settings"
		field = "!ECU reboot needed to apply these settings"
		field = "Use fixed baro corr from MAP", 		useFixedBaroCorrFromMap
        field = "ADC vRef voltage",						adcVcc
		field = "Analog divider",						analogInputDividerCoefficient
	
	dialog = tachSettings, "Tachometer Output"
		field = "!See also dizzySparkOutputPin"
		field = "Output",								pinTacho
		field = "Output Mode",							pinTachoMode
		field = "Rise at trigger index",				tachPulseTriggerIndex
		field = "Pulse duration is duty cycle",			tachPulseDurationAsDutyCycle
		field = "Pulse duration",						tachPulseDuractionMs
; todo: finish implementation under #907
		field = "Pulse per Rev",                        tachPulsePerRev


;			Board->Connection
	dialog = tsPort, "TunerStudio Port"
		field = "tunerStudioSerialSpeed",				tunerStudioSerialSpeed
		field = "Use UART/TTL serial?",					useSerialPort
		field = "uartConsoleSerialSpeed",				uartConsoleSerialSpeed
	
	
	
	dialog = can_settings
		field = "Can Read Enabled",						canReadEnabled
		field = "Can Write Enabled",					canWriteEnabled
		field = "Can Nbc Type",							canNbcType
		field = "Can Baud Rate",						canBaudRate
		field = "Can Sleep Period",						canSleepPeriodMs
		

	
		
	dialog = canBus, "CAN Bus", 	xAxis
		panel = can_settings
		

	dialog = auxSerial, "AUX Serial"
		field = "RX pin",								auxSerialRxPin @@if_ts_show_auxserial_pins
		field = "TX pin",								auxSerialTxPin @@if_ts_show_auxserial_pins
		field = "Serial Baud Rate",						auxSerialSpeed @@if_ts_show_auxserial_pins
		
	dialog = tle8888, "TLE8888", yAxis
		field = "useTLE8888 cranking reset hack",		useTLE8888_cranking_hack
		commandButton = "Reinit",						cmd_tle8888_init

	dialog = connection, "", 	yAxis
		field = "STM32 vRef voltage",					adcVcc
		panel = tsPort
		panel = tle8888

	
		


	dialog = allPinsSensors, "Inputs"
	field = ""
		field = "Analog Inputs" 
		field = "Use Two Throttles",                    useSecondEtb
		field = "#Throttle 1"
		field = "Throttle pedal Position Channel", 		throttlePedalPositionAdcChannel
		field = "TPS 1 Main Input", 					tps1_1AdcChannel
		field = "TPS 1 Sub Input", 						tps1_2AdcChannel
		field = "TPS 2 Main Input", 					tps2_1AdcChannel,  {useSecondEtb == 1}
		field = "TPS 2 Sub Input", 						tps2_2AdcChannel,  {useSecondEtb == 1}
		 
		field = "#Analog"
		field = "vBatt Input", 							vbattAdcChannel
		field = "MAF Sensor Input", 					mafAdcChannel
		field = "AFR Input", 							afr_hwChannel
		field = "Baro Sensor Input", 					baroSensor_hwChannel
		field = "MAP Sensor Input", 					map_sensor_hwChannel
		field = "Fuel Level Sensor", 					fuelLevelSensor
		
		field = "#Temperature Sensors"
		
		field = "Coolant Sensor Input", 				clt_adcChannel
		field = "Intake Air Temperature Input", 		iat_adcChannel
		field = "Aux Temperature #1",					auxTempSensor1_adcChannel
		field = "Aux Temperature #2",					auxTempSensor2_adcChannel
	
		field = "#Digital Inputs" 
		
		field = "Speed Input",							vehicleSpeedSensorInputPin
		field = "Clutch Down Input",					clutchDownPin
		field = "Input Mode",							clutchDownPinMode
		field = "Clutch Up Input",						clutchUpPin
		field = "Input Mode",                          	clutchUpPinMode
		field = "Brake Pedal",							brakePedalPin
		field = "A/C Switch",							acSwitchAdc
		
	

 dialog = etbpins, "E-Throttle"
        field = "Two-wire mode",						etb_use_two_wires
 	    field = "Throttle 1 Positive",					etbIo1_directionPin1
		field = "Throttle 1 Negative",					etbIo1_directionPin2  ,  {etb_use_two_wires == 1}
		field = "Throttle 1 Control",					etbIo1_controlPin1,  {etb_use_two_wires == 0}
		field = "Throttle 1 Disable",					etbIo1_disablePin,  {etb_use_two_wires == 0}
		field = "Throttle 2 Positive",					etbIo2_directionPin1,  {useSecondEtb == 1}  
		field = "Throttle 2 Negative",					etbIo2_directionPin2,  {useSecondEtb == 1}
		field = "Throttle 2 Control",					etbIo2_controlPin1,  {etb_use_two_wires == 0 && useSecondEtb == 1}     

		

	dialog = allPins1_1
		panel = allPinsSensors
	

	dialog = idlepins, "Idle Solenoid"
		field = "Idle Solenoid Output",					idle_solenoidPin
		field = "Idle Stepper Dir",						idle_pinStepperDirection
		field = "Idle Stepper Dir Mode",				pinStepperDirectionMode
		field = "Idle Stepper Step",					idle_stepperStepPin
		field = "Idle Stepper Enable",					pinStepperEnable

	dialog = miscoutputs, "Misc Outputs"
		field = "Fuel Pump Output",						pinFuelPump
		field = "Fuel Pump Output Mode",         	    pinFuelPumpMode
        field = "Tachometer output Pin",				pinTacho
		field = "Fan Pin",								pinFan
		field = "Fan Pin Mode",							pinFanMode
		field = "Main Relay Pin",  						pinMainRelay
		field = "Main Relay Mode",			         	pinMainRelayMode
		

	dialog = allPins1_2
	panel = etbpins
	  
		panel = miscoutputs
		

	dialog = allPins1_3
	panel = idlepins
		field = "CAN RX pin",							canRxPin
		field = "CAN TX pin",							canTxPin
	field = "Trigger Error", triggerErrorPin
	
	field = "Trigger Error Mode", triggerErrorPinMode
	field = "Trigger Sync", debugTriggerSync
	field = "Trigger Sync Mode", debugTriggerSyncMode
		

	
		dialog = allPins2_1
		field = "Injector Pin Mode",                    pinInjectorMode
		field = "Injection Pin 1",						pinInjector1
		field = "Injection Pin 2",						pinInjector2
		field = "Injection Pin 3",						pinInjector3
		field = "Injection Pin 4",						pinInjector4
		field = "Injection Pin 5 ",						pinInjector5
		field = "Injection Pin 6 ",						pinInjector6
		field = "Injection Pin 7 ",						pinInjector7
		field = "Injection Pin 8 ",						pinInjector8
		field = "Injection Pin 9 ",						pinInjector9
		field = "Injection Pin 10 ",	    			pinInjector10
		field = "Injection Pin 11 ",					pinInjector11
		field = "Injection Pin 12 ",					pinInjector12
		


	dialog = allPins2_2
		field = "Ignition Pin Mode",                    sparkEdge
		field = "Ignition Pin 1",                       pinCoil1
		field = "Ignition Pin 2",                       pinCoil2
		field = "Ignition Pin 3",                       pinCoil3
		field = "Ignition Pin 4",                       pinCoil4
		field = "Ignition Pin 5",                       pinCoil5
		field = "Ignition Pin 6",                       pinCoil6
		field = "Ignition Pin 7",                       pinCoil7
		field = "Ignition Pin 8",                       pinCoil8
		field = "Ignition Pin 9",                       pinCoil9
		field = "Ignition Pin 10",                      pinCoil10
		field = "Ignition Pin 11",                      pinCoil11
		field = "Ignition Pin 12",                      pinCoil12
     

	dialog = allPins1_1_and_2, "", xAxis
		panel = allPins1_1
		panel = allPins1_2

	dialog = allPins1, "All Pins 1/2", xAxis
		panel = allPins1_1_and_2
		panel = allPins1_3

	dialog = allPins2_1_and_2, "", xAxis
		panel = allPins2_1
		panel = allPins2_2
		

	dialog = allPins2, "All Pins 2/2", xAxis
		panel = allPins2_1_and_2


		dialog = ignitionOutputs, "Ignition Outputs"
		field = "Ignition Pin Mode",         	        sparkEdge, {enableIgnition == 1}
		field = "Ignition Pin 1",                       pinCoil1, {enableIgnition == 1}
		field = "Ignition Pin 2",                       pinCoil2, {enableIgnition == 1 && (ignitionMode != 0 && cylindersCount > 1) && (ignitionMode !=2 || twoWireBatchIgnition == 1 || ((firingOrder == 2) || (firingOrder == 7) || (firingOrder == 9) || (firingOrder == 11) || (firingOrder == 12)))}
		field = "Ignition Pin 3",                       pinCoil3, {enableIgnition == 1 && (ignitionMode != 0 && cylindersCount > 2) && (ignitionMode !=2 || twoWireBatchIgnition == 1 || ((firingOrder == 1) || (firingOrder == 3) || (firingOrder == 4) || (firingOrder == 5) || (firingOrder == 9)))}
		field = "Ignition Pin 4",                       pinCoil4, {enableIgnition == 1 && (ignitionMode != 0 && cylindersCount > 3) && (ignitionMode !=2 || twoWireBatchIgnition == 1 || ((firingOrder == 5) || (firingOrder == 7) || (firingOrder == 12)))}
		field = "Ignition Pin 5",                       pinCoil5, {enableIgnition == 1 && (ignitionMode != 0 && cylindersCount > 4) && (ignitionMode !=2 || twoWireBatchIgnition == 1 || ((firingOrder == 4) || (firingOrder == 12)))}
		field = "Ignition Pin 6",                       pinCoil6, {enableIgnition == 1 && (ignitionMode != 0 && cylindersCount > 5) && (ignitionMode !=2 || twoWireBatchIgnition == 1 )}
		field = "Ignition Pin 7",                       pinCoil7, {enableIgnition == 1 && (ignitionMode != 0 && cylindersCount > 6) && (ignitionMode !=2 || twoWireBatchIgnition == 1 || ((firingOrder == 11)))}
		field = "Ignition Pin 8",                       pinCoil8, {enableIgnition == 1 && (ignitionMode != 0 && cylindersCount > 7) && (ignitionMode !=2 || twoWireBatchIgnition == 1 || ((firingOrder == 5) || (firingOrder == 11)))}
		field = "Ignition Pin 9",                       pinCoil9, {enableIgnition == 1 && (ignitionMode != 0 && cylindersCount > 8) && (ignitionMode !=2 || twoWireBatchIgnition == 1 || ((firingOrder == 5) || (firingOrder == 11)))}
		field = "Ignition Pin 10",                      pinCoil10, {enableIgnition == 1 && (ignitionMode != 0 && cylindersCount > 9) && (ignitionMode !=2 || twoWireBatchIgnition == 1 || ((firingOrder == 5) || (firingOrder == 11)))}
		field = "Ignition Pin 11",                      pinCoil11, {enableIgnition == 1 && (ignitionMode != 0 && cylindersCount > 10) && (ignitionMode !=2 || twoWireBatchIgnition == 1 || ((firingOrder == 5) || (firingOrder == 11)))}
		field = "Ignition Pin 12",                      pinCoil12, {enableIgnition == 1 && (ignitionMode != 0 && cylindersCount > 11) && (ignitionMode !=2 || twoWireBatchIgnition == 1 || ((firingOrder == 5) || (firingOrder == 11)))}
	

	
    dialog = tpsAdcFields, "TPS Min / Max"
	;	commandButton = "Calibrate ETB TPS", cmd_calibrate_etb_tps, {calibrateMode}    
		field = "",
        field = "TPS Min", tpsMin
		field = "TPS Max", tpsMax

	dialog = tpsAdCGauge, "TPS ADC"
        gauge = tpsADCGauge
			

	dialog = fieldsAndGauge, "", xAxis
		panel = tpsAdcFields
		panel = tpsAdCGauge
			 		


	dialog = driveByWirePedal,""
		field = "Throttle Pedal Up",					throttlePedalUpVoltage
		field = "Throttle Pedal Wide Open",				throttlePedalWOTVoltage

	dialog = frpmTableBins, "RPM Bins for Fuel Table"       
 		array1D   = "", "Fuel RPM  %INDEX% ", frpm_table 

 
 	dialog = floadTableBins, "LOAD Bins for Fuel Table"       
 		array1D   = "", "Fuel LOAD  %INDEX% ", fmap_table 

	dialog = IrpmTableBins, "RPM Bins for Ignition Table"       
 		array1D   = "", "RPM  %INDEX% ", srpm_table 

 
 	dialog = IloadTableBins, "LOAD Bins for Ignition Table"       
 		array1D   = "", "LOAD  %INDEX% ", smap_table 

	dialog = batteryDialog, "Battery Settings",	yAxis
	    field = "#Use a Multimeter To Set Correction"
		field = "Battery Voltage Correction",	vbattDividerCoeff


	dialog = alternator, "Alternator Settings",	yAxis
		field = "Enabled",								enableAlternatorControl
		field = "On/Off Mode",					onOffAlternatorLogic, {enableAlternatorControl == 1}
		field = "Target",								targetVBatt, {enableAlternatorControl == 1}
		field = "Output",									pinAlternator, {enableAlternatorControl == 1}
		field = "Output Mode",								pinAlternatorMode, {enableAlternatorControl == 1}
		field = "PWM frequency",						alternatorPwmFrequency, {enableAlternatorControl == 1 && onOffAlternatorLogic == 0}
		field = "Off Above TPS",						alternatorOffAboveTps, {enableAlternatorControl == 1}
		field = "#PID Settings"
		field = "control period",						alternatorControl_periodMs, {enableAlternatorControl == 1}
		field = "#PID control"
		field = "Offset",								alternatorControl_offset, {enableAlternatorControl == 1 && onOffAlternatorLogic == 0}
		field = "P Gain",								alternatorControl_pFactor, {enableAlternatorControl == 1 && onOffAlternatorLogic == 0}
		field = "I Gain",								alternatorControl_iFactor, {enableAlternatorControl == 1 && onOffAlternatorLogic == 0}
		field = "D Gain",								alternatorControl_dFactor, {enableAlternatorControl == 1 && onOffAlternatorLogic == 0}
		field = "Min ??",									alternatorControl_minValue, {enableAlternatorControl == 1 && onOffAlternatorLogic == 0}
		field = "Max ??",									alternatorControl_maxValue, {enableAlternatorControl == 1 && onOffAlternatorLogic == 0}
		field = "#% duty = Pterm + Iterm + Dterm + offset%"
 ;-------------------------------------------------------------------------------
    ; General help text

      
		
		help = helpGeneral, "Wiring Information"
		text = "<h1>"
        text = "<img src='file:///$getProjectsDirPath()/docs/pinout.png'>"

		help = helpUpdate,     "Firmware Update"
		text = "<br>"	
		text = "<h3>Start by downloading and installing DFU Software and drivers"
		text = "<br>"
		text = "<h3>You can download from our website http://ruudbilelektro.no/files/en.stsw-stm32080.zip"
		text = "<br>"
		text = "<h3>Open DfuSeDemo, and press Firmware Update found under Configuration Menu"
		text = "<h3>You should then see STM32 in DFU Mode connected"


		help =	helpDbw, , "E-Throttle Setup"
		text = "<h3>Always start by configuring and calibrating your PP/TP Sensors"
		text = "<h3>Next, tune the Feed-Forward before PID"
		text = "<h3>See PID Tuning for setting the values"
		text = "<br>"
		text = "<h2>Feed Forward"
		text = "<br>"
		text = "<h3>Feed-forward is used to give the controller an estimated starting point faster than the actual PID controller can find the exact value."
		text = "<h3> This speeds up the controller and decreases the necessity of high PID values. A E-Throttle body has a spring that closes the throttle,"
		text = "<h3>that the e-throttle motor has to work against.By telling the controller how many % duty cycle is necessary to reach each a given target point,"
		text = "<h3> the PID only has to account for the smaller error from the estimated target given by the feed-forward."

		help =	helpPid, , "PID Tuning"
		text = "<br>"
		text = "<h3>  P is used to bring the value close to the target."
		text = "<h3>  I is used to brin the error to zero." 
		text = "<h3>  D is used to dampen the response."
		text = "<br>"
		text = "<h2>  Setup process"

		text = "<h3>P and I must always be used (not allowed to be zero), D is optional and not always necessary."
		text = "<h3>Usually starting by increasing the P and I together (using the same values) until it becomes slightly unstable."
		text = "<h3>Bring in some D to counteract that, and then fine-tune each value. Often by reducing P and increasing I."
		text = "<h3>The overall goal is to use as high values as possible while still having a stable response. "
		text = "<h3>Then decrease all values a bit to add some safety margin to prevent overshoot or oscillation."
		
	help =	helpBoost, , "Boost Control Setup"	

	help =	helpAls, , "AntiLag Setup"
		text = "<h2>Activation method"
		text = "<br>"
		text = "<h3>Always active - Anti-lag functionality is always activated."
		text = "<h3>Switch input - Activation of the function requires the digital input function anti-lag enable to be activated."
		text = "<br>"
 		text = "<h2>Anti-lag timeout"
		text = "<h3>Maximum amount of time the anti-lag function can be used."
		text = "<h3>It's not recommended to anti-lag more than 3-5second unless you really know what you are doing."
		text = "<br>"
 		text = "<h2>TPS Treshold"
		text = "<h3>Minimum TPS to activate the function."
		text = "<br>"
 		text = "<h3>RPM Treshold"
		text = "<h3>Minimum RPM to activate the function."
		text = "<br>"
 		text = "<h2>Coolant Treshold"
		text = "<h3>Minimum CLT to activate the function. Safety function to prevent cold engines to be able to anti-lag."
		text = "<br>"
 		text = "<h2>Air supply."
		text = "<h3>This function overrides the current position of the idle speed solenoid, E-Throttle or stepper motor. This override is used to bleed extra air into the engine when Anti-Lag is active. A standard Idle value does generally not flow enough air for proper Anti-Lag operation, an after market upgrade is often necessary"
		text = "<h3>To be able to anti-lag, the engine needs to get enough air to spool the turbo. Specifies where the extra air is from."
		text = "<br>"
		text = "<h3>Solenoid - Unuquie solenoid dedicated for this purpose only."
		text = "<h3>Idle control solenoid - Uses the idle air solenoid."
		text = "<h3>E-Throttle - Use the E-Throttle system."
		text = "<h3>Note: Anti-lag need a lot of air to build boost on low RPM with larger turbos."



	help =	helpLaunch, , "Launch Control Setup"
    ;-------------------------------------------------------------------------------

	dialog = gppwm1left, ""
		field = "Pin", gppwm1_pin
		field = ""
		field = "Set frequency to 0hz for on-off mode"
		field = "Frequency", gppwm1_pwmFrequency, {gppwm1_pin != 0}
		field = ""
		field = "On above duty", gppwm1_onAboveDuty, {gppwm1_pin != 0 && gppwm1_pwmFrequency == 0}
		field = "Off below duty", gppwm1_offBelowDuty, {gppwm1_pin != 0 && gppwm1_pwmFrequency == 0}
		field = "Duty if error", gppwm1_dutyIfError, {gppwm1_pin != 0}
		field = ""
		field = "Load Axis", gppwm1_loadAxis, {gppwm1_pin != 0}
		field = ""
		field = ""
		field = ""
		field = ""
		field = ""

	dialog = gppwm1, "General Purpose PWM 1", xAxis
		panel = gppwm1left
		panel = gppwm1Tbl, {gppwm1_pin != 0}

	dialog = gppwm2left, ""
		field = "Pin", gppwm2_pin
		field = ""
		field = "Set frequency to 0hz for on-off mode"
		field = "Frequency", gppwm2_pwmFrequency, {gppwm2_pin != 0}
		field = ""
		field = "On above duty", gppwm2_onAboveDuty, {gppwm2_pin != 0 && gppwm2_pwmFrequency == 0}
		field = "Off below duty", gppwm2_offBelowDuty, {gppwm2_pin != 0 && gppwm2_pwmFrequency == 0}
		field = "Duty if error", gppwm2_dutyIfError, {gppwm2_pin != 0}
		field = ""
		field = "Load Axis", gppwm2_loadAxis, {gppwm2_pin != 0}
		field = ""
		field = ""
		field = ""
		field = ""
		field = ""

	dialog = gppwm2, "General Purpose PWM 2", xAxis
		panel = gppwm2left
		panel = gppwm2Tbl, {gppwm2_pin != 0}

	dialog = gppwm3left, ""
		field = "Pin", gppwm3_pin
		field = ""
		field = "Set frequency to 0hz for on-off mode"
		field = "Frequency", gppwm3_pwmFrequency, {gppwm3_pin != 0}
		field = ""
		field = "On above duty", gppwm3_onAboveDuty, {gppwm3_pin != 0 && gppwm3_pwmFrequency == 0}
		field = "Off below duty", gppwm3_offBelowDuty, {gppwm3_pin != 0 && gppwm3_pwmFrequency == 0}
		field = "Duty if error", gppwm3_dutyIfError, {gppwm3_pin != 0}
		field = ""
		field = "Load Axis", gppwm3_loadAxis, {gppwm3_pin != 0}
		field = ""
		field = ""
		field = ""
		field = ""
		field = ""

	dialog = gppwm3, "General Purpose PWM 3", xAxis
		panel = gppwm3left
		panel = gppwm3Tbl, {gppwm3_pin != 0}

	dialog = gppwm4left, ""
		field = "Pin", gppwm4_pin
		field = ""
		field = "Set frequency to 0hz for on-off mode"
		field = "Frequency", gppwm4_pwmFrequency, {gppwm4_pin != 0}
		field = ""
		field = "On above duty", gppwm4_onAboveDuty, {gppwm4_pin != 0 && gppwm4_pwmFrequency == 0}
		field = "Off below duty", gppwm4_offBelowDuty, {gppwm4_pin != 0 && gppwm4_pwmFrequency == 0}
		field = "Duty if error", gppwm4_dutyIfError, {gppwm4_pin != 0}
		field = ""
		field = "Load Axis", gppwm4_loadAxis, {gppwm4_pin != 0}
		field = ""
		field = ""
		field = ""
		field = ""
		field = ""

	dialog = gppwm4, "General Purpose PWM 4", xAxis
		panel = gppwm4left
		panel = gppwm4Tbl, {gppwm4_pin != 0}

[Tools]
 ;addTool = toolName, PanelName
 addTool = veTableGenerator, "VE Table Generator", veTableTbl
 addTool = afrTableGenerator, "AFR Table Generator", afrTableTbl
 
